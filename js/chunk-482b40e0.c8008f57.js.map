{"version":3,"sources":["webpack:///./src/views/login/components/login-form.vue?1ad4","webpack:///./src/assets/images/qrcode.jpg","webpack:///./src/views/login/index.vue","webpack:///./src/views/login/components/login-form.vue","webpack:///./src/views/login/components/login-form.vue?0ba8","webpack:///./src/views/login/index.vue?1969","webpack:///./src/views/login/index.vue?062c"],"names":["module","exports","class","_createElementVNode","src","_imports_0","alt","href","_hoisted_4","_hoisted_5","_createVNode","_component_LoginHeader","_hoisted_1","_hoisted_2","onClick","_cache","$event","$setup","activeName","_normalizeClass","active","_createBlock","_component_LoginForm","key","_createElementBlock","_hoisted_3","_hoisted_6","_component_LoginFooter","_hoisted_35","isMsgLogin","_component_Form","ref","validation-schema","schema","autocomplete","errors","_Fragment","_hoisted_15","_hoisted_16","_hoisted_17","_component_Field","error","mobile","form","name","type","placeholder","_hoisted_18","_hoisted_19","_toDisplayString","_hoisted_20","_hoisted_21","_hoisted_22","code","send","time","_hoisted_23","_hoisted_24","_hoisted_7","account","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","password","_hoisted_13","_hoisted_14","_hoisted_25","_hoisted_26","as","isAgree","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","login","_hoisted_33","qqUrl","_hoisted_36","_hoisted_34","_hoisted_37","components","Form","Field","setup","reactive","mySchema","formCom","watch","value","resetForm","store","useStore","router","useRouter","route","useRoute","async","valid","validate","data","userMobileLogin","userAccountLogin","id","avatar","nickname","token","result","commit","dispatch","then","push","query","redirectUrl","Message","text","e","response","message","pause","resume","useIntervalFn","onUnmounted","userMobileLoginMsg","catch","_e$response$data","setFieldError","appId","process","qqBack","encodeURIComponent","__exports__","LoginHeader","LoginFooter","LoginForm","render"],"mappings":"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","file":"js/chunk-482b40e0.c8008f57.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./login-form.vue?vue&type=style&index=0&id=7453d80e&scoped=true&lang=less\"","module.exports = __webpack_public_path__ + \"img/qrcode.5372a064.jpg\";","<template>\n  <LoginHeader>欢迎登录</LoginHeader>\n  <section class=\"login-section\">\n    <div class=\"wrapper\">\n      <nav>\n        <a @click=\"activeName='account'\" :class=\"{active:activeName==='account'}\" href=\"javascript:;\">账户登录</a>\n        <a @click=\"activeName='qrcode'\" :class=\"{active:activeName==='qrcode'}\" href=\"javascript:;\">扫码登录</a>\n      </nav>\n      <!-- 帐号登录&扫码登录 -->\n      <LoginForm v-if=\"activeName==='account'\">表单</LoginForm>\n      <div v-if=\"activeName==='qrcode'\" class=\"qrcode-box\">\n        <img src=\"@/assets/images/qrcode.jpg\" alt=\"\">\n        <p>打开 <a href=\"javascript:;\">小兔鲜App</a> 扫码登录</p>\n      </div>\n    </div>\n  </section>\n  <LoginFooter />\n</template>\n<script>\nimport LoginHeader from './components/login-header'\nimport LoginFooter from './components/login-footer'\nimport LoginForm from './components/login-form'\nimport { ref } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRoute } from 'vue-router'\nexport default {\n  name: 'PageLogin',\n  components: { LoginHeader, LoginFooter, LoginForm },\n  setup () {\n    const activeName = ref('account')\n\n    // 存储回跳地址\n    const store = useStore()\n    const route = useRoute()\n    store.commit('user/setRedirectUrl', route.query.redirectUrl || '/')\n\n    return { activeName }\n  }\n}\n</script>\n<style scoped lang=\"less\">\n.login-section {\n  background: url(../../assets/images/login-bg.png) no-repeat center / cover;\n  height: 488px;\n  position: relative;\n  .wrapper {\n    width: 380px;\n    background: #fff;\n    min-height: 400px;\n    position: absolute;\n    left: 50%;\n    top: 54px;\n    transform: translate3d(100px,0,0);\n    box-shadow: 0 0 10px rgba(0,0,0,.15);\n    nav {\n      height: 55px;\n      border-bottom: 1px solid #f5f5f5;\n      display: flex;\n      padding: 0 40px;\n      text-align: right;\n      align-items: center;\n      a {\n        flex: 1;\n        line-height: 1;\n        display: inline-block;\n        font-size: 18px;\n        position: relative;\n        &:first-child {\n          border-right: 1px solid #f5f5f5;\n          text-align: left;\n        }\n        &.active{\n          color: @xtxColor;\n          font-weight: bold;\n        }\n      }\n    }\n  }\n}\n// 二维码容器\n.qrcode-box {\n  text-align: center;\n  padding-top: 40px;\n  p {\n    margin-top: 20px;\n    a {\n      color: @xtxColor;\n      font-size: 16px;\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"account-box\">\n    <div class=\"toggle\">\n      <a @click=\"isMsgLogin=false\" href=\"javascript:;\" v-if=\"isMsgLogin\">\n        <i class=\"iconfont icon-user\"></i> 使用账号登录\n      </a>\n      <a @click=\"isMsgLogin=true\" href=\"javascript:;\" v-else>\n        <i class=\"iconfont icon-msg\"></i> 使用短信登录\n      </a>\n    </div>\n    <Form ref=\"formCom\" class=\"form\" :validation-schema=\"schema\" v-slot=\"{errors}\" autocomplete=\"off\">\n      <template v-if=\"!isMsgLogin\">\n        <div class=\"form-item\">\n          <div class=\"input\">\n            <i class=\"iconfont icon-user\"></i>\n            <Field :class=\"{error:errors.account}\" v-model=\"form.account\" name=\"account\" type=\"text\" placeholder=\"请输入用户名\" />\n          </div>\n          <div class=\"error\" v-if=\"errors.account\">\n            <i class=\"iconfont icon-warning\" />\n            {{errors.account}}\n          </div>\n        </div>\n        <div class=\"form-item\">\n          <div class=\"input\">\n            <i class=\"iconfont icon-lock\"></i>\n            <Field :class=\"{error:errors.password}\" v-model=\"form.password\" name=\"password\" type=\"password\" placeholder=\"请输入密码\" />\n          </div>\n          <div class=\"error\" v-if=\"errors.password\">\n            <i class=\"iconfont icon-warning\" />\n            {{errors.password}}\n          </div>\n        </div>\n      </template>\n      <template v-else>\n        <div class=\"form-item\">\n          <div class=\"input\">\n            <i class=\"iconfont icon-user\"></i>\n            <Field :class=\"{error:errors.mobile}\" v-model=\"form.mobile\" name=\"mobile\" type=\"text\" placeholder=\"请输入手机号\" />\n          </div>\n          <div class=\"error\" v-if=\"errors.mobile\">\n            <i class=\"iconfont icon-warning\" />\n            {{errors.mobile}}\n          </div>\n        </div>\n        <div class=\"form-item\">\n          <div class=\"input\">\n            <i class=\"iconfont icon-code\"></i>\n            <Field :class=\"{error:errors.code}\" v-model=\"form.code\" name=\"code\" type=\"text\" placeholder=\"请输入验证码\" />\n            <span @click=\"send()\" class=\"code\">\n              {{time===0?'发送验证码':`${time}秒后发送`}}\n            </span>\n          </div>\n          <div class=\"error\" v-if=\"errors.code\">\n            <i class=\"iconfont icon-warning\" />\n            {{errors.code}}\n          </div>\n        </div>\n      </template>\n      <div class=\"form-item\">\n        <div class=\"agree\">\n          <Field as=\"XtxCheckbox\" name=\"isAgree\" v-model=\"form.isAgree\" />\n          <span>我已同意</span>\n          <a href=\"javascript:;\">《隐私条款》</a>\n          <span>和</span>\n          <a href=\"javascript:;\">《服务条款》</a>\n        </div>\n        <div class=\"error\" v-if=\"errors.isAgree\">\n          <i class=\"iconfont icon-warning\" />\n          {{errors.isAgree}}\n        </div>\n      </div>\n      <a @click=\"login()\" href=\"javascript:;\" class=\"btn\">登录</a>\n    </Form>\n    <div class=\"action\">\n      <a :href=\"qqUrl\">\n        <img src=\"https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png\" alt=\"\">\n      </a>\n      <div class=\"url\">\n        <a href=\"javascript:;\">忘记密码</a>\n        <a href=\"javascript:;\">免费注册</a>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { onUnmounted, reactive, ref, watch } from 'vue'\nimport { Form, Field } from 'vee-validate'\nimport schema from '@/utils/vee-validate-schema'\nimport Message from '@/components/library/Message'\nimport { userAccountLogin, userMobileLogin, userMobileLoginMsg } from '@/api/user'\nimport { useStore } from 'vuex'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useIntervalFn } from '@vueuse/core'\nexport default {\n  name: 'LoginForm',\n  components: { Form, Field },\n  setup () {\n    // 切换短信登录\n    const isMsgLogin = ref(false)\n    // 表单数据对象\n    const form = reactive({\n      isAgree: true,\n      account: 'xiaotuxian001',\n      password: '123456',\n      mobile: null,\n      code: null\n    })\n\n    // vee-validate 校验基本步骤\n    // 1. 导入 Form Field 组件 将 form 和 input 进行替换，需要加上name用来指定将来的校验规则函数的\n    // 2. Field 需要进行数据绑定，字段名称最好和后台接口需要的一致\n    // 3. 定义Field的name属性指定的校验规则函数，Form的validation-schema接受定义好的校验规则是对象\n    // 4. 自定义组件需要校验必须先支持v-model 然后Field使用as指定为组件名称\n    const mySchema = {\n      // 校验函数规则：返回true就是校验成功，返回一个字符串就是失败，字符串就是错误提示\n      account: schema.account,\n      password: schema.password,\n      mobile: schema.mobile,\n      code: schema.code,\n      isAgree: schema.isAgree\n    }\n\n    // 监听isMsgLogin重置表单（数据+清除校验结果）\n    const formCom = ref(null)\n    watch(isMsgLogin, () => {\n      // 重置数据\n      form.isAgree = true\n      form.account = null\n      form.password = null\n      form.mobile = null\n      form.code = null\n      // 如果是没有销毁Field组件，之前的校验结果是不会清除  例如：v-show切换的\n      // Form组件提供了一个 resetForm 函数清除校验结果\n      formCom.value.resetForm()\n    })\n\n    // setup中获取组件实例 proxy\n    // const { proxy } = getCurrentInstance()\n    // proxy.$message({ text: '111' })\n\n    // 需要在点击登录的时候对整体表单进行校验\n    const store = useStore()\n    const router = useRouter()\n    const route = useRoute()\n    const login = async () => {\n      // Form组件提供了一个 validate 函数作为整体表单校验，当是返回的是一个promise\n      const valid = await formCom.value.validate()\n      if (valid) {\n        try {\n          let data = null\n          if (isMsgLogin.value) {\n            // **手机号登录\n            // 2.1. 准备一个API做手机号登录\n            // 2.2. 调用API函数\n            // 2.3. 成功：存储用户信息 + 跳转至来源页或者首页 + 消息提示\n            // 2.4. 失败：消息提示\n            const { mobile, code } = form\n            data = await userMobileLogin({ mobile, code })\n          } else {\n            // **帐号登录\n            // 1. 准备一个API做帐号登录\n            // 2. 调用API函数\n            // 3. 成功：存储用户信息 + 跳转至来源页或者首页 + 消息提示\n            // 4. 失败：消息提示\n            const { account, password } = form\n            data = await userAccountLogin({ account, password })\n          }\n          // 存储用户信息\n          const { id, account, avatar, mobile, nickname, token } = data.result\n          store.commit('user/setUser', { id, account, avatar, mobile, nickname, token })\n          store.dispatch('cart/mergeCart').then(() => {\n            // 进行跳转\n            router.push(route.query.redirectUrl || '/')\n            // 成功消息提示\n            Message({ type: 'success', text: '登录成功' })\n          })\n        } catch (e) {\n          // 失败提示\n          if (e.response.data) {\n            Message({ type: 'error', text: e.response.data.message || '登录失败' })\n          }\n        }\n      }\n    }\n\n    // pause 暂停 resume 开始\n    // useIntervalFn(回调函数,执行间隔,是否立即开启)\n    const time = ref(0)\n    const { pause, resume } = useIntervalFn(() => {\n      time.value--\n      if (time.value <= 0) {\n        pause()\n      }\n    }, 1000, false)\n    onUnmounted(() => {\n      pause()\n    })\n\n    // 1. 发送验证码\n    // 1.1 绑定发送验证码按钮点击事件\n    // 1.2 校验手机号，如果成功才去发送短信（定义API），请求成功开启60s的倒计时，不能再次点击，倒计时结束恢复\n    // 1.3 如果失败，失败的校验样式显示出来\n    const send = async () => {\n      const valid = mySchema.mobile(form.mobile)\n      if (valid === true) {\n        // 通过\n        if (time.value === 0) {\n        // 没有倒计时才可以发送\n          userMobileLoginMsg(form.mobile).then(() => {\n            Message({ type: 'success', text: '发送成功' })\n            time.value = 60\n            resume()\n          }).catch(e => {\n            Message({ type: 'error', text: e.response.data?.message || '发送失败' })\n          })\n        }\n      } else {\n        // 失败，使用vee的错误函数显示错误信息 setFieldError(字段,错误信息)\n        formCom.value.setFieldError('mobile', valid)\n      }\n    }\n\n    // 初始化QQ登录按钮 （官方）\n    // 1. 准备span有id = qqLoginBtn\n    // 2. QC.Login({btnId:\"qqLoginBtn\"})\n    // onMounted(() => {\n    //   QC.Login({ btnId: 'qqLoginBtn' })\n    // })\n    const appId = process.env.VUE_APP_QQAPPID\n    const qqBack = encodeURIComponent(process.env.VUE_APP_QQBACK)\n    const qqUrl = `https://graph.qq.com/oauth2.0/authorize?client_id=${appId}&response_type=token&scope=all&redirect_uri=${qqBack}`\n\n    return { isMsgLogin, form, schema: mySchema, formCom, login, send, time, qqUrl }\n  }\n}\n</script>\n<style scoped lang=\"less\">\n// 账号容器\n.account-box {\n  .toggle {\n    padding: 15px 40px;\n    text-align: right;\n    a {\n      color: @xtxColor;\n      i {\n        font-size: 14px;\n      }\n    }\n  }\n  .form {\n    padding: 0 40px;\n    &-item {\n      margin-bottom: 28px;\n      .input {\n        position: relative;\n        height: 36px;\n        > i {\n          width: 34px;\n          height: 34px;\n          background: #cfcdcd;\n          color: #fff;\n          position: absolute;\n          left: 1px;\n          top: 1px;\n          text-align: center;\n          line-height: 34px;\n          font-size: 18px;\n        }\n        input {\n          padding-left: 44px;\n          border: 1px solid #cfcdcd;\n          height: 36px;\n          line-height: 36px;\n          width: 100%;\n          &.error {\n            border-color: @priceColor;\n          }\n          &.active,&:focus {\n            border-color: @xtxColor;\n          }\n        }\n        .code {\n          position: absolute;\n          right: 1px;\n          top: 1px;\n          text-align: center;\n          line-height: 34px;\n          font-size: 14px;\n          background: #f5f5f5;\n          color: #666;\n          width: 90px;\n          height: 34px;\n          cursor: pointer;\n        }\n      }\n      > .error {\n        position: absolute;\n        font-size: 12px;\n        line-height: 28px;\n        color: @priceColor;\n        i {\n          font-size: 14px;\n          margin-right: 2px;\n        }\n      }\n    }\n    .agree {\n      a {\n        color: #069;\n      }\n    }\n    .btn {\n      display: block;\n      width: 100%;\n      height: 40px;\n      color: #fff;\n      text-align: center;\n      line-height: 40px;\n      background: @xtxColor;\n      &.disabled {\n        background: #cfcdcd;\n      }\n    }\n  }\n  .action {\n    padding: 20px 40px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    .url {\n      a {\n        color: #999;\n        margin-left: 10px;\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./login-form.vue?vue&type=template&id=7453d80e&scoped=true\"\nimport script from \"./login-form.vue?vue&type=script&lang=js\"\nexport * from \"./login-form.vue?vue&type=script&lang=js\"\n\nimport \"./login-form.vue?vue&type=style&index=0&id=7453d80e&scoped=true&lang=less\"\n\nimport exportComponent from \"/home/runner/work/erabbit-web-front/erabbit-web-front/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7453d80e\"]])\n\nexport default __exports__","import { render } from \"./index.vue?vue&type=template&id=78257f91&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=78257f91&scoped=true&lang=less\"\n\nimport exportComponent from \"/home/runner/work/erabbit-web-front/erabbit-web-front/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-78257f91\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=78257f91&scoped=true&lang=less\""],"sourceRoot":""}