{"version":3,"sources":["webpack:///./src/views/category/sub.vue","webpack:///./src/views/category/components/sub-bread.vue","webpack:///./src/views/category/components/sub-bread.vue?fd6e","webpack:///./src/views/category/components/sub-filter.vue","webpack:///./src/views/category/components/sub-filter.vue?1a4b","webpack:///./src/views/category/components/sub-sort.vue","webpack:///./src/views/category/components/sub-sort.vue?bb88","webpack:///./src/views/category/sub.vue?12ad","webpack:///./src/views/category/components/goods-item.vue?d92e","webpack:///./src/views/category/components/sub-sort.vue?691d","webpack:///./src/views/category/components/goods-item.vue","webpack:///./src/views/category/components/goods-item.vue?ffe0","webpack:///./src/views/category/components/sub-filter.vue?c6a4","webpack:///./src/views/category/sub.vue?5ea4"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_SubBread","_component_SubFilter","onFilterChange","$setup","filterChange","_hoisted_3","_component_SubSort","onSortChange","sortChange","_Fragment","_renderList","goodsList","goods","key","id","_component_GoodsItem","_component_XtxInfiniteLoading","loading","finished","onInfinite","getData","_createBlock","_component_XtxBread","_component_XtxBreadItem","to","category","top","name","_Transition","mode","sub","setup","route","useRoute","store","useStore","computed","cate","state","list","forEach","children","find","params","__exports__","filterData","filterLoading","_hoisted_4","brands","item","_normalizeClass","active","selectedBrand","title","onClick","$event","changeBrand","href","_hoisted_5","saleProperties","_hoisted_6","_toDisplayString","_hoisted_7","properties","prop","selectedProp","changeProp","_hoisted_8","_hoisted_9","_component_XtxSkeleton","width","height","props","emit","ref","watch","newVal","path","value","findSubCategoryFilter","then","data","result","unshift","immediate","getFilterParams","obj","brandId","attrs","push","groupName","propertyName","length","propId","sortParams","sortField","_cache","changeSort","sortMethod","_component_XtxCheckbox","onChange","changeCheck","inventory","onlyDiscount","reactive","components","SubBread","SubFilter","SubSort","GoodsItem","reqParams","page","pageSize","categoryId","findSubCategoryGoods","items","filterParams","render","alt","$props","isLink","_component_RouterLink","picture","desc","price","type","Object","default","Boolean"],"mappings":"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","file":"js/chunk-57d40857.4c70feec.js","sourcesContent":["<template>\n  <div class=\"sub-categroy\">\n    <div class=\"container\">\n      <!-- 面包屑 -->\n      <SubBread />\n      <!-- 筛选区 -->\n      <SubFilter @filter-change=\"filterChange\" />\n      <!-- 商品面板（排序+列表） -->\n      <div class=\"goods-list\">\n        <SubSort @sort-change=\"sortChange\" />\n        <ul>\n          <li v-for=\"goods in goodsList\" :key=\"goods.id\" >\n            <GoodsItem :goods=\"goods\" />\n          </li>\n        </ul>\n        <!-- 无限加载组件 -->\n        <XtxInfiniteLoading :loading=\"loading\" :finished=\"finished\" @infinite=\"getData\" />\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport SubBread from './components/sub-bread'\nimport SubFilter from './components/sub-filter'\nimport SubSort from './components/sub-sort'\nimport GoodsItem from './components/goods-item'\nimport { ref, watch } from 'vue'\nimport { findSubCategoryGoods } from '@/api/category'\nimport { useRoute } from 'vue-router'\nexport default {\n  name: 'SubCategory',\n  components: { SubBread, SubFilter, SubSort, GoodsItem },\n  setup () {\n    const route = useRoute()\n    // 加载中\n    const loading = ref(false)\n    // 是否加载完毕\n    const finished = ref(false)\n    // 商品列表数据\n    const goodsList = ref([])\n    // 请求参数\n    let reqParams = {\n      page: 1,\n      pageSize: 20\n    }\n    const getData = () => {\n      loading.value = true\n      // 设置二级分类的ID\n      reqParams.categoryId = route.params.id\n      findSubCategoryGoods(reqParams).then(({ result }) => {\n        // 获取数据成功\n        if (result.items.length) {\n          // 有数据就追加数据\n          goodsList.value.push(...result.items)\n          // 把page改成下一页页码\n          reqParams.page++\n        } else {\n          // 没有数据，代表加载完成\n          finished.value = true\n        }\n        loading.value = false\n      })\n    }\n    // 在更改了二级分类的时候需要重新加载数据\n    watch(() => route.params.id, (newVal) => {\n      if (newVal && `/category/sub/${newVal}` === route.path) {\n        finished.value = false\n        goodsList.value = [] // 导致列表空的，加载更多组件顶上来，进入可视区，区加载数据\n        reqParams = {\n          page: 1,\n          pageSize: 20\n        }\n      }\n    })\n    // 1. 更改排序组件的筛选数据，重新请求\n    const sortChange = (sortParams) => {\n      finished.value = false\n      // 合并请求参数，保留之前参数\n      reqParams = { ...reqParams, ...sortParams }\n      reqParams.page = 1\n      goodsList.value = []\n      getData()\n    }\n    // 2. 更改筛选组件的筛选数据，重新请求\n    const filterChange = (filterParams) => {\n      finished.value = false\n      // 合并请求参数，保留之前参数\n      reqParams = { ...reqParams, ...filterParams }\n      reqParams.page = 1\n      goodsList.value = []\n      getData()\n    }\n\n    return { loading, finished, getData, goodsList, sortChange, filterChange }\n  }\n}\n</script>\n<style scoped lang=\"less\">\n.goods-list {\n  background: #fff;\n  padding: 0 25px;\n  margin-top: 25px;\n  ul {\n    display: flex;\n    flex-wrap: wrap;\n    padding: 0 5px;\n    li {\n      margin-right: 20px;\n      margin-bottom: 20px;\n      &:nth-child(5n) {\n        margin-right: 0;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <XtxBread>\n    <XtxBreadItem to=\"/\">首页</XtxBreadItem>\n    <XtxBreadItem :key=\"category.top.id\" v-if=\"category.top\" :to=\"`/category/${category.top.id}`\">{{category.top.name}}</XtxBreadItem>\n    <Transition name=\"fade-right\" mode=\"out-in\">\n      <XtxBreadItem :key=\"category.sub.id\" v-if=\"category.sub\">{{category.sub.name}}</XtxBreadItem>\n    </Transition>\n  </XtxBread>\n</template>\n<script>\nimport { useStore } from 'vuex'\nimport { useRoute } from 'vue-router'\nimport { computed } from 'vue'\nexport default {\n  name: 'SubBread',\n  setup () {\n    // 通过计算属性从vuex获取顶级和二级类目信息\n    // 数据对象：{top:{id,name},sub:{id:name}}\n    const route = useRoute()\n    const store = useStore()\n    const category = computed(() => {\n      const cate = {}\n      // 完成获取数据逻辑\n      store.state.category.list.forEach(top => {\n        if (top.children) {\n          const sub = top.children.find(sub => sub.id === route.params.id)\n          if (sub) {\n            cate.top = { id: top.id, name: top.name }\n            cate.sub = { id: sub.id, name: sub.name }\n          }\n        }\n      })\n      return cate\n    })\n\n    return { category }\n  }\n}\n</script>\n<style scoped lang=\"less\"></style>\n","import { render } from \"./sub-bread.vue?vue&type=template&id=3cfc1344\"\nimport script from \"./sub-bread.vue?vue&type=script&lang=js\"\nexport * from \"./sub-bread.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/erabbit-web-front/erabbit-web-front/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"sub-filter\" v-if=\"filterData && !filterLoading\">\n    <div class=\"item\">\n      <div class=\"head\">品牌：</div>\n      <div class=\"body\">\n        <a class=\"ellipsis\" :title=\"item.name\" @click=\"changeBrand(item.id)\" :class=\"{active:item.id===filterData.selectedBrand}\" href=\"javascript:;\" v-for=\"item in filterData.brands\" :key=\"item.id\">{{item.name}}</a>\n      </div>\n    </div>\n    <div class=\"item\" v-for=\"item in filterData.saleProperties\" :key=\"item.id\">\n      <div class=\"head\">{{item.name}}：</div>\n      <div class=\"body\">\n        <a class=\"ellipsis\" :title=\"prop.name\" @click=\"changeProp(item,prop.id)\" :class=\"{active:prop.id===item.selectedProp}\" href=\"javascript:;\" v-for=\"prop in item.properties\" :key=\"prop.id\">{{prop.name}}</a>\n      </div>\n    </div>\n  </div>\n  <div v-else class=\"sub-filter\">\n    <XtxSkeleton class=\"item\" width=\"800px\" height=\"40px\"  />\n    <XtxSkeleton class=\"item\" width=\"800px\" height=\"40px\"  />\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\"  />\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\"  />\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\"  />\n  </div>\n</template>\n<script>\nimport { ref, watch } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { findSubCategoryFilter } from '@/api/category'\nexport default {\n  name: 'SubFilter',\n  setup (props, { emit }) {\n    const route = useRoute()\n    // 监听二级类目ID的变化获取筛选数据\n    const filterData = ref(null)\n    const filterLoading = ref(false)\n    watch(() => route.params.id, (newVal) => {\n      // 变化后的ID有值 且 处在二级类名路由下\n      if (newVal && `/category/sub/${newVal}` === route.path) {\n        filterLoading.value = true\n        // 发请求获取数据\n        findSubCategoryFilter(route.params.id).then(data => {\n          // 每一组可选的筛选条件缺失 全部 条件，处理下数据加上全部\n          // 给每一组数据加上一个选中的ID\n          // 1. 品牌\n          data.result.selectedBrand = null\n          data.result.brands.unshift({ id: null, name: '全部' })\n          // 2. 属性\n          data.result.saleProperties.forEach(item => {\n            item.selectedProp = null\n            item.properties.unshift({ id: null, name: '全部' })\n          })\n          // 设置修改的数据\n          filterData.value = data.result\n          filterLoading.value = false\n        })\n      }\n    }, { immediate: true })\n\n    // 获取筛选参数的函数\n    const getFilterParams = () => {\n      const obj = { brandId: null, attrs: [] }\n      // 品牌\n      obj.brandId = filterData.value.selectedBrand\n      // 销售属性\n      filterData.value.saleProperties.forEach(item => {\n        if (item.selectedProp) {\n          const prop = item.properties.find(prop => prop.id === item.selectedProp)\n          obj.attrs.push({ groupName: item.name, propertyName: prop.name })\n        }\n      })\n      // 参考数据：{brandId:'',attrs:[{groupName:'',propertyName:''},...]}\n      if (obj.attrs.length === 0) obj.attrs = null\n      return obj\n    }\n\n    // 1. 记录当前选择的品牌\n    const changeBrand = (brandId) => {\n      if (filterData.value.selectedBrand === brandId) return\n      filterData.value.selectedBrand = brandId\n      emit('filter-change', getFilterParams())\n    }\n    // 2. 记录呢选择的销售属性\n    const changeProp = (item, propId) => {\n      if (item.selectedProp === propId) return\n      item.selectedProp = propId\n      emit('filter-change', getFilterParams())\n    }\n\n    return { filterData, filterLoading, changeBrand, changeProp }\n  }\n}\n</script>\n<style scoped lang='less'>\n  // 筛选区\n  .sub-filter {\n    background: #fff;\n    padding: 25px;\n    .item {\n      display: flex;\n      .head {\n        width: 80px;\n        color: #999;\n        line-height: 40px;\n      }\n      .body {\n        flex: 1;\n        a {\n          margin-right: 36px;\n          transition: all .3s;\n          display: inline-block;\n          max-width: 112px;\n          line-height: 40px;\n          &.active,\n          &:hover {\n            color: @xtxColor;\n          }\n        }\n      }\n    }\n    .xtx-skeleton {\n      padding: 10px 0;\n    }\n  }\n</style>\n","import { render } from \"./sub-filter.vue?vue&type=template&id=1e9897c0&scoped=true\"\nimport script from \"./sub-filter.vue?vue&type=script&lang=js\"\nexport * from \"./sub-filter.vue?vue&type=script&lang=js\"\n\nimport \"./sub-filter.vue?vue&type=style&index=0&id=1e9897c0&scoped=true&lang=less\"\n\nimport exportComponent from \"/home/runner/work/erabbit-web-front/erabbit-web-front/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1e9897c0\"]])\n\nexport default __exports__","<template>\n  <div class='sub-sort'>\n    <div class=\"sort\">\n      <a :class=\"{active:sortParams.sortField===null}\" @click=\"changeSort(null)\" href=\"javascript:;\">默认排序</a>\n      <a :class=\"{active:sortParams.sortField==='publishTime'}\" @click=\"changeSort('publishTime')\" href=\"javascript:;\">最新商品</a>\n      <a :class=\"{active:sortParams.sortField==='orderNum'}\" @click=\"changeSort('orderNum')\" href=\"javascript:;\">最高人气</a>\n      <a :class=\"{active:sortParams.sortField==='evaluateNum'}\" @click=\"changeSort('evaluateNum')\" href=\"javascript:;\">评论最多</a>\n      <a @click=\"changeSort('price')\" href=\"javascript:;\">\n        价格排序\n        <i class=\"arrow up\" :class=\"{active:sortParams.sortField==='price'&&sortParams.sortMethod==='asc'}\" />\n        <i class=\"arrow down\" :class=\"{active:sortParams.sortField==='price'&&sortParams.sortMethod==='desc'}\" />\n      </a>\n    </div>\n    <div class=\"check\">\n      <XtxCheckbox @change=\"changeCheck\" v-model=\"sortParams.inventory\">仅显示有货商品</XtxCheckbox>\n      <XtxCheckbox @change=\"changeCheck\" v-model=\"sortParams.onlyDiscount\">仅显示特惠商品</XtxCheckbox>\n    </div>\n  </div>\n</template>\n<script>\nimport { reactive } from 'vue'\nexport default {\n  name: 'SubSort',\n  setup (props, { emit }) {\n    // 实现交互（实现交换的数据和后台保持一致）\n    // 1. 明确交互数据\n    const sortParams = reactive({\n      inventory: false,\n      onlyDiscount: false,\n      sortField: null, // publishTime,orderNum,price,evaluateNum\n      sortMethod: null // asc为正序，desc为倒序，默认为desc\n    })\n    // 2. 提供模板使用\n    // 3. 需要绑定按钮的点击事件修改排序字段和排序方式\n    const changeSort = (sortField) => {\n      if (sortField === 'price') {\n        sortParams.sortField = sortField\n        // 处理排序\n        if (sortParams.sortMethod === null) {\n          sortParams.sortMethod = 'desc'\n        } else {\n          sortParams.sortMethod = sortParams.sortMethod === 'desc' ? 'asc' : 'desc'\n        }\n      } else {\n        // 如果已经选项阻止运行\n        if (sortParams.sortField === sortField) return\n        sortParams.sortField = sortField\n        sortParams.sortMethod = null\n      }\n      // 触发 sort-change 事件\n      emit('sort-change', sortParams)\n    }\n    const changeCheck = () => {\n      // 触发 sort-change 事件\n      emit('sort-change', sortParams)\n    }\n    return { sortParams, changeSort, changeCheck }\n  }\n}\n</script>\n<style scoped lang='less'>\n.sub-sort {\n  height: 80px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  .sort {\n    display: flex;\n    a {\n      height: 30px;\n      line-height: 28px;\n      border: 1px solid #e4e4e4;\n      padding: 0 20px;\n      margin-right: 20px;\n      color: #999;\n      border-radius: 2px;\n      position: relative;\n      transition: all .3s;\n      &.active {\n        background: @xtxColor;\n        border-color: @xtxColor;\n        color: #fff;\n      }\n      .arrow {\n        position: absolute;\n        border: 5px solid transparent;\n        right: 8px;\n        &.up {\n          top: 3px;\n          border-bottom-color: #bbb;\n            &.active {\n            border-bottom-color: @xtxColor;\n          }\n        }\n        &.down {\n          top: 15px;\n          border-top-color: #bbb;\n          &.active {\n            border-top-color: @xtxColor;\n          }\n        }\n      }\n    }\n  }\n  .check {\n    .xtx-checkbox {\n      margin-left: 20px;\n      color: #999;\n    }\n  }\n}\n</style>\n","import { render } from \"./sub-sort.vue?vue&type=template&id=37c4a6d2&scoped=true\"\nimport script from \"./sub-sort.vue?vue&type=script&lang=js\"\nexport * from \"./sub-sort.vue?vue&type=script&lang=js\"\n\nimport \"./sub-sort.vue?vue&type=style&index=0&id=37c4a6d2&scoped=true&lang=less\"\n\nimport exportComponent from \"/home/runner/work/erabbit-web-front/erabbit-web-front/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-37c4a6d2\"]])\n\nexport default __exports__","import { render } from \"./sub.vue?vue&type=template&id=5dd098f9&scoped=true\"\nimport script from \"./sub.vue?vue&type=script&lang=js\"\nexport * from \"./sub.vue?vue&type=script&lang=js\"\n\nimport \"./sub.vue?vue&type=style&index=0&id=5dd098f9&scoped=true&lang=less\"\n\nimport exportComponent from \"/home/runner/work/erabbit-web-front/erabbit-web-front/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5dd098f9\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./goods-item.vue?vue&type=style&index=0&id=3828c3be&scoped=true&lang=less\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./sub-sort.vue?vue&type=style&index=0&id=37c4a6d2&scoped=true&lang=less\"","<template>\n  <RouterLink v-if=\"isLink\" :to=\"`/product/${goods.id}`\" class='goods-item'>\n    <img v-lazy=\"goods.picture\" alt=\"\">\n    <p class=\"name ellipsis\">{{goods.name}}</p>\n    <p class=\"desc ellipsis\">{{goods.desc}}</p>\n    <p class=\"price\">&yen;{{goods.price}}</p>\n  </RouterLink>\n  <a v-else href=\"javascript:;\" class='goods-item'>\n    <img v-lazy=\"goods.picture\" alt=\"\">\n    <p class=\"name ellipsis\">{{goods.name}}</p>\n    <p class=\"desc ellipsis\">{{goods.desc}}</p>\n    <p class=\"price\">&yen;{{goods.price}}</p>\n  </a>\n</template>\n\n<script>\nexport default {\n  name: 'GoodsItem',\n  props: {\n    goods: {\n      type: Object,\n      default: () => ({})\n    },\n    isLink: {\n      type: Boolean,\n      default: true\n    }\n  }\n}\n</script>\n\n<style scoped lang='less'>\n.goods-item {\n  display: block;\n  width: 220px;\n  padding: 20px 30px;\n  text-align: center;\n  .hoverShadow();\n  img {\n    width: 160px;\n    height: 160px;\n  }\n  p {\n    padding-top: 10px;\n  }\n  .name {\n    font-size: 16px;\n  }\n  .desc {\n    color: #999;\n    height: 29px;\n  }\n  .price {\n    color: @priceColor;\n    font-size: 20px;\n  }\n}\n</style>\n","import { render } from \"./goods-item.vue?vue&type=template&id=3828c3be&scoped=true\"\nimport script from \"./goods-item.vue?vue&type=script&lang=js\"\nexport * from \"./goods-item.vue?vue&type=script&lang=js\"\n\nimport \"./goods-item.vue?vue&type=style&index=0&id=3828c3be&scoped=true&lang=less\"\n\nimport exportComponent from \"/home/runner/work/erabbit-web-front/erabbit-web-front/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3828c3be\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./sub-filter.vue?vue&type=style&index=0&id=1e9897c0&scoped=true&lang=less\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./sub.vue?vue&type=style&index=0&id=5dd098f9&scoped=true&lang=less\""],"sourceRoot":""}