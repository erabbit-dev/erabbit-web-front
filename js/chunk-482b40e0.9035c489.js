(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-482b40e0"],{"1b50":function(e,t,c){},"4e43":function(e,t,c){"use strict";c("c416")},"72b4":function(e,t,c){e.exports=c.p+"img/qrcode.5372a064.jpg"},"9ed6":function(e,t,c){"use strict";c.r(t);var o=c("7a23"),a=c("72b4"),r=c.n(a),n=Object(o["withScopeId"])("data-v-78257f91");Object(o["pushScopeId"])("data-v-78257f91");var l=Object(o["createTextVNode"])("欢迎登录"),s={class:"login-section"},i={class:"wrapper"},d=Object(o["createTextVNode"])("表单"),u={key:1,class:"qrcode-box"},b=Object(o["createVNode"])("img",{src:r.a,alt:""},null,-1),j=Object(o["createVNode"])("p",null,[Object(o["createTextVNode"])("打开 "),Object(o["createVNode"])("a",{href:"javascript:;"},"小兔鲜App"),Object(o["createTextVNode"])(" 扫码登录")],-1);Object(o["popScopeId"])();var m=n((function(e,t,c,a,r,m){var O=Object(o["resolveComponent"])("LoginHeader"),p=Object(o["resolveComponent"])("LoginForm"),f=Object(o["resolveComponent"])("LoginFooter");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(O,null,{default:n((function(){return[l]})),_:1}),Object(o["createVNode"])("section",s,[Object(o["createVNode"])("div",i,[Object(o["createVNode"])("nav",null,[Object(o["createVNode"])("a",{onClick:t[1]||(t[1]=function(e){return a.activeName="account"}),class:{active:"account"===a.activeName},href:"javascript:;"},"账户登录",2),Object(o["createVNode"])("a",{onClick:t[2]||(t[2]=function(e){return a.activeName="qrcode"}),class:{active:"qrcode"===a.activeName},href:"javascript:;"},"扫码登录",2)]),"account"===a.activeName?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:0},{default:n((function(){return[d]})),_:1})):Object(o["createCommentVNode"])("",!0),"qrcode"===a.activeName?(Object(o["openBlock"])(),Object(o["createBlock"])("div",u,[b,j])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createVNode"])(f)],64)})),O=c("cc8e"),p=c("136e"),f=Object(o["withScopeId"])("data-v-7453d80e");Object(o["pushScopeId"])("data-v-7453d80e");var v={class:"account-box"},V={class:"toggle"},N=Object(o["createVNode"])("i",{class:"iconfont icon-user"},null,-1),g=Object(o["createTextVNode"])(" 使用账号登录 "),k=Object(o["createVNode"])("i",{class:"iconfont icon-msg"},null,-1),h=Object(o["createTextVNode"])(" 使用短信登录 "),w={class:"form-item"},x={class:"input"},y=Object(o["createVNode"])("i",{class:"iconfont icon-user"},null,-1),B={key:0,class:"error"},C=Object(o["createVNode"])("i",{class:"iconfont icon-warning"},null,-1),q={class:"form-item"},F={class:"input"},L=Object(o["createVNode"])("i",{class:"iconfont icon-lock"},null,-1),U={key:0,class:"error"},S=Object(o["createVNode"])("i",{class:"iconfont icon-warning"},null,-1),_={class:"form-item"},T={class:"input"},A=Object(o["createVNode"])("i",{class:"iconfont icon-user"},null,-1),I={key:0,class:"error"},D=Object(o["createVNode"])("i",{class:"iconfont icon-warning"},null,-1),R={class:"form-item"},M={class:"input"},z=Object(o["createVNode"])("i",{class:"iconfont icon-code"},null,-1),H={key:0,class:"error"},J=Object(o["createVNode"])("i",{class:"iconfont icon-warning"},null,-1),E={class:"form-item"},P={class:"agree"},X=Object(o["createVNode"])("span",null,"我已同意",-1),G=Object(o["createVNode"])("a",{href:"javascript:;"},"《隐私条款》",-1),K=Object(o["createVNode"])("span",null,"和",-1),Q=Object(o["createVNode"])("a",{href:"javascript:;"},"《服务条款》",-1),W={key:0,class:"error"},Y=Object(o["createVNode"])("i",{class:"iconfont icon-warning"},null,-1),Z={class:"action"},$=Object(o["createVNode"])("img",{src:"https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png",alt:""},null,-1),ee=Object(o["createVNode"])("div",{class:"url"},[Object(o["createVNode"])("a",{href:"javascript:;"},"忘记密码"),Object(o["createVNode"])("a",{href:"javascript:;"},"免费注册")],-1);Object(o["popScopeId"])();var te=f((function(e,t,c,a,r,n){var l=Object(o["resolveComponent"])("Field"),s=Object(o["resolveComponent"])("Form");return Object(o["openBlock"])(),Object(o["createBlock"])("div",v,[Object(o["createVNode"])("div",V,[a.isMsgLogin?(Object(o["openBlock"])(),Object(o["createBlock"])("a",{key:0,onClick:t[1]||(t[1]=function(e){return a.isMsgLogin=!1}),href:"javascript:;"},[N,g])):(Object(o["openBlock"])(),Object(o["createBlock"])("a",{key:1,onClick:t[2]||(t[2]=function(e){return a.isMsgLogin=!0}),href:"javascript:;"},[k,h]))]),Object(o["createVNode"])(s,{ref:"formCom",class:"form","validation-schema":a.schema,autocomplete:"off"},{default:f((function(e){var c=e.errors;return[a.isMsgLogin?(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:1},[Object(o["createVNode"])("div",_,[Object(o["createVNode"])("div",T,[A,Object(o["createVNode"])(l,{class:{error:c.mobile},modelValue:a.form.mobile,"onUpdate:modelValue":t[5]||(t[5]=function(e){return a.form.mobile=e}),name:"mobile",type:"text",placeholder:"请输入手机号"},null,8,["class","modelValue"])]),c.mobile?(Object(o["openBlock"])(),Object(o["createBlock"])("div",I,[D,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(c.mobile),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("div",R,[Object(o["createVNode"])("div",M,[z,Object(o["createVNode"])(l,{class:{error:c.code},modelValue:a.form.code,"onUpdate:modelValue":t[6]||(t[6]=function(e){return a.form.code=e}),name:"code",type:"text",placeholder:"请输入验证码"},null,8,["class","modelValue"]),Object(o["createVNode"])("span",{onClick:t[7]||(t[7]=function(e){return a.send()}),class:"code"},Object(o["toDisplayString"])(0===a.time?"发送验证码":"".concat(a.time,"秒后发送")),1)]),c.code?(Object(o["openBlock"])(),Object(o["createBlock"])("div",H,[J,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(c.code),1)])):Object(o["createCommentVNode"])("",!0)])],64)):(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[Object(o["createVNode"])("div",w,[Object(o["createVNode"])("div",x,[y,Object(o["createVNode"])(l,{class:{error:c.account},modelValue:a.form.account,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.form.account=e}),name:"account",type:"text",placeholder:"请输入用户名"},null,8,["class","modelValue"])]),c.account?(Object(o["openBlock"])(),Object(o["createBlock"])("div",B,[C,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(c.account),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("div",q,[Object(o["createVNode"])("div",F,[L,Object(o["createVNode"])(l,{class:{error:c.password},modelValue:a.form.password,"onUpdate:modelValue":t[4]||(t[4]=function(e){return a.form.password=e}),name:"password",type:"password",placeholder:"请输入密码"},null,8,["class","modelValue"])]),c.password?(Object(o["openBlock"])(),Object(o["createBlock"])("div",U,[S,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(c.password),1)])):Object(o["createCommentVNode"])("",!0)])],64)),Object(o["createVNode"])("div",E,[Object(o["createVNode"])("div",P,[Object(o["createVNode"])(l,{as:"XtxCheckbox",name:"isAgree",modelValue:a.form.isAgree,"onUpdate:modelValue":t[8]||(t[8]=function(e){return a.form.isAgree=e})},null,8,["modelValue"]),X,G,K,Q]),c.isAgree?(Object(o["openBlock"])(),Object(o["createBlock"])("div",W,[Y,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(c.isAgree),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("a",{onClick:t[9]||(t[9]=function(e){return a.login()}),href:"javascript:;",class:"btn"},"登录")]})),_:1},8,["validation-schema"]),Object(o["createVNode"])("div",Z,[Object(o["createVNode"])("a",{href:a.qqUrl},[$],8,["href"]),ee])])})),ce=c("1da1"),oe=(c("99af"),c("96cf"),c("7bb1")),ae=c("9f94"),re=c("2f59"),ne=c("c24f"),le=c("5502"),se=c("6c02"),ie=c("7bbe"),de={name:"LoginForm",components:{Form:oe["b"],Field:oe["a"]},setup:function(){var e=Object(o["ref"])(!1),t=Object(o["reactive"])({isAgree:!0,account:"xiaotuxian001",password:"123456",mobile:null,code:null}),c={account:ae["a"].account,password:ae["a"].password,mobile:ae["a"].mobile,code:ae["a"].code,isAgree:ae["a"].isAgree},a=Object(o["ref"])(null);Object(o["watch"])(e,(function(){t.isAgree=!0,t.account=null,t.password=null,t.mobile=null,t.code=null,a.value.resetForm()}));var r=Object(le["b"])(),n=Object(se["d"])(),l=Object(se["c"])(),s=function(){var c=Object(ce["a"])(regeneratorRuntime.mark((function c(){var o,s,i,d,u,b,j,m,O,p,f,v,V;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.next=2,a.value.validate();case 2:if(o=c.sent,!o){c.next=25;break}if(c.prev=4,s=null,!e.value){c.next=13;break}return i=t.mobile,d=t.code,c.next=10,Object(ne["c"])({mobile:i,code:d});case 10:s=c.sent,c.next=17;break;case 13:return u=t.account,b=t.password,c.next=16,Object(ne["b"])({account:u,password:b});case 16:s=c.sent;case 17:j=s.result,m=j.id,O=j.account,p=j.avatar,f=j.mobile,v=j.nickname,V=j.token,r.commit("user/setUser",{id:m,account:O,avatar:p,mobile:f,nickname:v,token:V}),r.dispatch("cart/mergeCart").then((function(){n.push(l.query.redirectUrl||"/"),Object(re["a"])({type:"success",text:"登录成功"})})),c.next=25;break;case 22:c.prev=22,c.t0=c["catch"](4),c.t0.response.data&&Object(re["a"])({type:"error",text:c.t0.response.data.message||"登录失败"});case 25:case"end":return c.stop()}}),c,null,[[4,22]])})));return function(){return c.apply(this,arguments)}}(),i=Object(o["ref"])(0),d=Object(ie["u"])((function(){i.value--,i.value<=0&&u()}),1e3,!1),u=d.pause,b=d.resume;Object(o["onUnmounted"])((function(){u()}));var j=function(){var e=Object(ce["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o=c.mobile(t.mobile),!0===o?0===i.value&&Object(ne["d"])(t.mobile).then((function(){Object(re["a"])({type:"success",text:"发送成功"}),i.value=60,b()})).catch((function(e){var t;Object(re["a"])({type:"error",text:(null===(t=e.response.data)||void 0===t?void 0:t.message)||"发送失败"})})):a.value.setFieldError("mobile",o);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m="101941968",O=encodeURIComponent("http://erabbit.itheima.net/#/login/callback"),p="https://graph.qq.com/oauth2.0/authorize?client_id=".concat(m,"&response_type=token&scope=all&redirect_uri=").concat(O);return{isMsgLogin:e,form:t,schema:c,formCom:a,login:s,send:j,time:i,qqUrl:p}}};c("4e43");de.render=te,de.__scopeId="data-v-7453d80e";var ue=de,be={name:"PageLogin",components:{LoginHeader:O["a"],LoginFooter:p["a"],LoginForm:ue},setup:function(){var e=Object(o["ref"])("account"),t=Object(le["b"])(),c=Object(se["c"])();return t.commit("user/setRedirectUrl",c.query.redirectUrl||"/"),{activeName:e}}};c("e87b");be.render=m,be.__scopeId="data-v-78257f91";t["default"]=be},c416:function(e,t,c){},e87b:function(e,t,c){"use strict";c("1b50")}}]);
//# sourceMappingURL=chunk-482b40e0.9035c489.js.map