(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57d40857"],{"06b7":function(e,t,c){"use strict";c.r(t);var a=c("7a23");const o={class:"sub-categroy"},r={class:"container"},n={class:"goods-list"};function l(e,t,c,l,s,i){const d=Object(a["resolveComponent"])("SubBread"),b=Object(a["resolveComponent"])("SubFilter"),j=Object(a["resolveComponent"])("SubSort"),u=Object(a["resolveComponent"])("GoodsItem"),p=Object(a["resolveComponent"])("XtxInfiniteLoading");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("div",r,[Object(a["createVNode"])(d),Object(a["createVNode"])(b,{onFilterChange:l.filterChange},null,8,["onFilterChange"]),Object(a["createElementVNode"])("div",n,[Object(a["createVNode"])(j,{onSortChange:l.sortChange},null,8,["onSortChange"]),Object(a["createElementVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(l.goodsList,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:e.id},[Object(a["createVNode"])(u,{goods:e},null,8,["goods"])]))),128))]),Object(a["createVNode"])(p,{loading:l.loading,finished:l.finished,onInfinite:l.getData},null,8,["loading","finished","onInfinite"])])])])}c("14d9");function s(e,t,c,o,r,n){const l=Object(a["resolveComponent"])("XtxBreadItem"),s=Object(a["resolveComponent"])("XtxBread");return Object(a["openBlock"])(),Object(a["createBlock"])(s,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,{to:"/"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("首页")]),_:1}),o.category.top?(Object(a["openBlock"])(),Object(a["createBlock"])(l,{key:o.category.top.id,to:"/category/"+o.category.top.id},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(o.category.top.name),1)]),_:1},8,["to"])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(a["Transition"],{name:"fade-right",mode:"out-in"},{default:Object(a["withCtx"])(()=>[o.category.sub?(Object(a["openBlock"])(),Object(a["createBlock"])(l,{key:o.category.sub.id},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(o.category.sub.name),1)]),_:1})):Object(a["createCommentVNode"])("",!0)]),_:1})]),_:1})}var i=c("5502"),d=c("6605"),b={name:"SubBread",setup(){const e=Object(d["c"])(),t=Object(i["b"])(),c=Object(a["computed"])(()=>{const c={};return t.state.category.list.forEach(t=>{if(t.children){const a=t.children.find(t=>t.id===e.params.id);a&&(c.top={id:t.id,name:t.name},c.sub={id:a.id,name:a.name})}}),c});return{category:c}}},j=c("6b0d"),u=c.n(j);const p=u()(b,[["render",s]]);var m=p;const O=e=>(Object(a["pushScopeId"])("data-v-1e9897c0"),e=e(),Object(a["popScopeId"])(),e),h={key:0,class:"sub-filter"},g={class:"item"},v=O(()=>Object(a["createElementVNode"])("div",{class:"head"},"品牌：",-1)),f={class:"body"},k=["title","onClick"],C={class:"head"},N={class:"body"},V=["title","onClick"],y={key:1,class:"sub-filter"};function B(e,t,c,o,r,n){const l=Object(a["resolveComponent"])("XtxSkeleton");return o.filterData&&!o.filterLoading?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",h,[Object(a["createElementVNode"])("div",g,[v,Object(a["createElementVNode"])("div",f,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(o.filterData.brands,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("a",{class:Object(a["normalizeClass"])(["ellipsis",{active:e.id===o.filterData.selectedBrand}]),title:e.name,onClick:t=>o.changeBrand(e.id),href:"javascript:;",key:e.id},Object(a["toDisplayString"])(e.name),11,k))),128))])]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(o.filterData.saleProperties,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"item",key:e.id},[Object(a["createElementVNode"])("div",C,Object(a["toDisplayString"])(e.name)+"：",1),Object(a["createElementVNode"])("div",N,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.properties,t=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("a",{class:Object(a["normalizeClass"])(["ellipsis",{active:t.id===e.selectedProp}]),title:t.name,onClick:c=>o.changeProp(e,t.id),href:"javascript:;",key:t.id},Object(a["toDisplayString"])(t.name),11,V))),128))])]))),128))])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",y,[Object(a["createVNode"])(l,{class:"item",width:"800px",height:"40px"}),Object(a["createVNode"])(l,{class:"item",width:"800px",height:"40px"}),Object(a["createVNode"])(l,{class:"item",width:"600px",height:"40px"}),Object(a["createVNode"])(l,{class:"item",width:"600px",height:"40px"}),Object(a["createVNode"])(l,{class:"item",width:"600px",height:"40px"})]))}c("3c65");var E=c("c405"),S={name:"SubFilter",setup(e,{emit:t}){const c=Object(d["c"])(),o=Object(a["ref"])(null),r=Object(a["ref"])(!1);Object(a["watch"])(()=>c.params.id,e=>{e&&"/category/sub/"+e===c.path&&(r.value=!0,Object(E["b"])(c.params.id).then(e=>{e.result.selectedBrand=null,e.result.brands.unshift({id:null,name:"全部"}),e.result.saleProperties.forEach(e=>{e.selectedProp=null,e.properties.unshift({id:null,name:"全部"})}),o.value=e.result,r.value=!1}))},{immediate:!0});const n=()=>{const e={brandId:null,attrs:[]};return e.brandId=o.value.selectedBrand,o.value.saleProperties.forEach(t=>{if(t.selectedProp){const c=t.properties.find(e=>e.id===t.selectedProp);e.attrs.push({groupName:t.name,propertyName:c.name})}}),0===e.attrs.length&&(e.attrs=null),e},l=e=>{o.value.selectedBrand!==e&&(o.value.selectedBrand=e,t("filter-change",n()))},s=(e,c)=>{e.selectedProp!==c&&(e.selectedProp=c,t("filter-change",n()))};return{filterData:o,filterLoading:r,changeBrand:l,changeProp:s}}};c("72bb");const x=u()(S,[["render",B],["__scopeId","data-v-1e9897c0"]]);var w=x;const D={class:"sub-sort"},P={class:"sort"},F={class:"check"};function I(e,t,c,o,r,n){const l=Object(a["resolveComponent"])("XtxCheckbox");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",D,[Object(a["createElementVNode"])("div",P,[Object(a["createElementVNode"])("a",{class:Object(a["normalizeClass"])({active:null===o.sortParams.sortField}),onClick:t[0]||(t[0]=e=>o.changeSort(null)),href:"javascript:;"},"默认排序",2),Object(a["createElementVNode"])("a",{class:Object(a["normalizeClass"])({active:"publishTime"===o.sortParams.sortField}),onClick:t[1]||(t[1]=e=>o.changeSort("publishTime")),href:"javascript:;"},"最新商品",2),Object(a["createElementVNode"])("a",{class:Object(a["normalizeClass"])({active:"orderNum"===o.sortParams.sortField}),onClick:t[2]||(t[2]=e=>o.changeSort("orderNum")),href:"javascript:;"},"最高人气",2),Object(a["createElementVNode"])("a",{class:Object(a["normalizeClass"])({active:"evaluateNum"===o.sortParams.sortField}),onClick:t[3]||(t[3]=e=>o.changeSort("evaluateNum")),href:"javascript:;"},"评论最多",2),Object(a["createElementVNode"])("a",{onClick:t[4]||(t[4]=e=>o.changeSort("price")),href:"javascript:;"},[Object(a["createTextVNode"])(" 价格排序 "),Object(a["createElementVNode"])("i",{class:Object(a["normalizeClass"])(["arrow up",{active:"price"===o.sortParams.sortField&&"asc"===o.sortParams.sortMethod}])},null,2),Object(a["createElementVNode"])("i",{class:Object(a["normalizeClass"])(["arrow down",{active:"price"===o.sortParams.sortField&&"desc"===o.sortParams.sortMethod}])},null,2)])]),Object(a["createElementVNode"])("div",F,[Object(a["createVNode"])(l,{onChange:o.changeCheck,modelValue:o.sortParams.inventory,"onUpdate:modelValue":t[5]||(t[5]=e=>o.sortParams.inventory=e)},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("仅显示有货商品")]),_:1},8,["onChange","modelValue"]),Object(a["createVNode"])(l,{onChange:o.changeCheck,modelValue:o.sortParams.onlyDiscount,"onUpdate:modelValue":t[6]||(t[6]=e=>o.sortParams.onlyDiscount=e)},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("仅显示特惠商品")]),_:1},8,["onChange","modelValue"])])])}var _={name:"SubSort",setup(e,{emit:t}){const c=Object(a["reactive"])({inventory:!1,onlyDiscount:!1,sortField:null,sortMethod:null}),o=e=>{if("price"===e)c.sortField=e,null===c.sortMethod?c.sortMethod="desc":c.sortMethod="desc"===c.sortMethod?"asc":"desc";else{if(c.sortField===e)return;c.sortField=e,c.sortMethod=null}t("sort-change",c)},r=()=>{t("sort-change",c)};return{sortParams:c,changeSort:o,changeCheck:r}}};c("6e28");const L=u()(_,[["render",I],["__scopeId","data-v-37c4a6d2"]]);var z=L,T=c("71f5"),M={name:"SubCategory",components:{SubBread:m,SubFilter:w,SubSort:z,GoodsItem:T["a"]},setup(){const e=Object(d["c"])(),t=Object(a["ref"])(!1),c=Object(a["ref"])(!1),o=Object(a["ref"])([]);let r={page:1,pageSize:20};const n=()=>{t.value=!0,r.categoryId=e.params.id,Object(E["c"])(r).then(({result:e})=>{e.items.length?(o.value.push(...e.items),r.page++):c.value=!0,t.value=!1})};Object(a["watch"])(()=>e.params.id,t=>{t&&"/category/sub/"+t===e.path&&(c.value=!1,o.value=[],r={page:1,pageSize:20})});const l=e=>{c.value=!1,r={...r,...e},r.page=1,o.value=[],n()},s=e=>{c.value=!1,r={...r,...e},r.page=1,o.value=[],n()};return{loading:t,finished:c,getData:n,goodsList:o,sortChange:l,filterChange:s}}};c("de85");const X=u()(M,[["render",l],["__scopeId","data-v-5dd098f9"]]);t["default"]=X},"0d45":function(e,t,c){},"3c0b":function(e,t,c){"use strict";c("6157")},6157:function(e,t,c){},"6e28":function(e,t,c){"use strict";c("e78e")},"71f5":function(e,t,c){"use strict";var a=c("7a23");const o={alt:""},r={class:"name ellipsis"},n={class:"desc ellipsis"},l={class:"price"},s={key:1,href:"javascript:;",class:"goods-item"},i={alt:""},d={class:"name ellipsis"},b={class:"desc ellipsis"},j={class:"price"};function u(e,t,c,u,p,m){const O=Object(a["resolveComponent"])("RouterLink"),h=Object(a["resolveDirective"])("lazy");return c.isLink?(Object(a["openBlock"])(),Object(a["createBlock"])(O,{key:0,to:"/product/"+c.goods.id,class:"goods-item"},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createElementVNode"])("img",o,null,512),[[h,c.goods.picture]]),Object(a["createElementVNode"])("p",r,Object(a["toDisplayString"])(c.goods.name),1),Object(a["createElementVNode"])("p",n,Object(a["toDisplayString"])(c.goods.desc),1),Object(a["createElementVNode"])("p",l,"¥"+Object(a["toDisplayString"])(c.goods.price),1)]),_:1},8,["to"])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("a",s,[Object(a["withDirectives"])(Object(a["createElementVNode"])("img",i,null,512),[[h,c.goods.picture]]),Object(a["createElementVNode"])("p",d,Object(a["toDisplayString"])(c.goods.name),1),Object(a["createElementVNode"])("p",b,Object(a["toDisplayString"])(c.goods.desc),1),Object(a["createElementVNode"])("p",j,"¥"+Object(a["toDisplayString"])(c.goods.price),1)]))}var p={name:"GoodsItem",props:{goods:{type:Object,default:()=>({})},isLink:{type:Boolean,default:!0}}},m=(c("3c0b"),c("6b0d")),O=c.n(m);const h=O()(p,[["render",u],["__scopeId","data-v-3828c3be"]]);t["a"]=h},"72bb":function(e,t,c){"use strict";c("0d45")},de85:function(e,t,c){"use strict";c("fa28")},e78e:function(e,t,c){},fa28:function(e,t,c){}}]);
//# sourceMappingURL=chunk-57d40857.4c70feec.js.map