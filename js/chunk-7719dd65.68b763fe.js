(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7719dd65"],{"0cb2":function(e,t,c){var r=c("7b0b"),a=Math.floor,o="".replace,n=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,c,l,i,s){var u=c+e.length,b=l.length,j=d;return void 0!==i&&(i=r(i),j=n),o.call(s,j,(function(r,o){var n;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,c);case"'":return t.slice(u);case"<":n=i[o.slice(1,-1)];break;default:var d=+o;if(0===d)return r;if(d>b){var s=a(d/10);return 0===s?r:s<=b?void 0===l[s-1]?o.charAt(1):l[s-1]+o.charAt(1):r}n=l[d-1]}return void 0===n?"":n}))}},"15bc":function(e,t,c){"use strict";c.r(t);c("b0c0");var r=c("7a23"),a=Object(r["withScopeId"])("data-v-2c45ae0c");Object(r["pushScopeId"])("data-v-2c45ae0c");var o={class:"xtx-pay-checkout-page"},n={class:"container"},d=Object(r["createTextVNode"])("首页"),l=Object(r["createTextVNode"])("购物车"),i=Object(r["createTextVNode"])("填写订单"),s={key:0,class:"wrapper"},u=Object(r["createVNode"])("h3",{class:"box-title"},"收货地址",-1),b={class:"box-body"},j=Object(r["createVNode"])("h3",{class:"box-title"},"商品信息",-1),O={class:"box-body"},f={class:"goods"},v=Object(r["createVNode"])("thead",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",{width:"520"},"商品信息"),Object(r["createVNode"])("th",{width:"170"},"单价"),Object(r["createVNode"])("th",{width:"170"},"数量"),Object(r["createVNode"])("th",{width:"170"},"小计"),Object(r["createVNode"])("th",{width:"170"},"实付")])],-1),p={class:"right"},V=Object(r["createStaticVNode"])('<h3 class="box-title" data-v-2c45ae0c>配送时间</h3><div class="box-body" data-v-2c45ae0c><a class="my-btn active" href="javascript:;" data-v-2c45ae0c>不限送货时间：周一至周日</a><a class="my-btn" href="javascript:;" data-v-2c45ae0c>工作日送货：周一至周五</a><a class="my-btn" href="javascript:;" data-v-2c45ae0c>双休日、假日送货：周六至周日</a></div><h3 class="box-title" data-v-2c45ae0c>支付方式</h3><div class="box-body" data-v-2c45ae0c><a class="my-btn active" href="javascript:;" data-v-2c45ae0c>在线支付</a><a class="my-btn" href="javascript:;" data-v-2c45ae0c>货到付款</a><span style="color:#999;" data-v-2c45ae0c>货到付款需付5元手续费</span></div><h3 class="box-title" data-v-2c45ae0c>金额明细</h3>',5),N={class:"box-body"},m={class:"total"},h=Object(r["createVNode"])("dt",null,"商品件数：",-1),g=Object(r["createVNode"])("dt",null,"商品总价：",-1),x=Object(r["createVNode"])("dt",null,[Object(r["createTextVNode"])("运"),Object(r["createVNode"])("i"),Object(r["createTextVNode"])("费：")],-1),y=Object(r["createVNode"])("dt",null,"应付总额：",-1),k={class:"price"},C={class:"submit"},D=Object(r["createTextVNode"])("提交订单");Object(r["popScopeId"])();var S=a((function(e,t,c,S,T,A){var w=Object(r["resolveComponent"])("XtxBreadItem"),I=Object(r["resolveComponent"])("XtxBread"),B=Object(r["resolveComponent"])("CheckoutAddress"),_=Object(r["resolveComponent"])("RouterLink"),E=Object(r["resolveComponent"])("XtxButton");return Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])("div",n,[Object(r["createVNode"])(I,null,{default:a((function(){return[Object(r["createVNode"])(w,{to:"/"},{default:a((function(){return[d]})),_:1}),Object(r["createVNode"])(w,{to:"/cart"},{default:a((function(){return[l]})),_:1}),Object(r["createVNode"])(w,null,{default:a((function(){return[i]})),_:1})]})),_:1}),S.order?(Object(r["openBlock"])(),Object(r["createBlock"])("div",s,[u,Object(r["createVNode"])("div",b,[Object(r["createVNode"])(B,{onChange:S.changeAddress,list:S.order.userAddresses},null,8,["onChange","list"])]),j,Object(r["createVNode"])("div",O,[Object(r["createVNode"])("table",f,[v,Object(r["createVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(S.order.goods,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:e.skuId},[Object(r["createVNode"])("td",null,[Object(r["createVNode"])(_,{to:"/product/".concat(e.id),class:"info"},{default:a((function(){return[Object(r["createVNode"])("img",{src:e.picture,alt:""},null,8,["src"]),Object(r["createVNode"])("div",p,[Object(r["createVNode"])("p",null,Object(r["toDisplayString"])(e.name),1),Object(r["createVNode"])("p",null,Object(r["toDisplayString"])(e.attrsText),1)])]})),_:2},1032,["to"])]),Object(r["createVNode"])("td",null,"¥"+Object(r["toDisplayString"])(e.price),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.count),1),Object(r["createVNode"])("td",null,"¥"+Object(r["toDisplayString"])(e.totalPrice),1),Object(r["createVNode"])("td",null,"¥"+Object(r["toDisplayString"])(e.totalPayPrice),1)])})),128))])])]),V,Object(r["createVNode"])("div",N,[Object(r["createVNode"])("div",m,[Object(r["createVNode"])("dl",null,[h,Object(r["createVNode"])("dd",null,Object(r["toDisplayString"])(S.order.summary.goodsCount)+"件",1)]),Object(r["createVNode"])("dl",null,[g,Object(r["createVNode"])("dd",null,"¥"+Object(r["toDisplayString"])(S.order.summary.totalPrice),1)]),Object(r["createVNode"])("dl",null,[x,Object(r["createVNode"])("dd",null,"¥"+Object(r["toDisplayString"])(S.order.summary.postFee),1)]),Object(r["createVNode"])("dl",null,[y,Object(r["createVNode"])("dd",k,"¥"+Object(r["toDisplayString"])(S.order.summary.totalPayPrice),1)])])]),Object(r["createVNode"])("div",C,[Object(r["createVNode"])(E,{onClick:S.submitOrderFn,type:"primary"},{default:a((function(){return[D]})),_:1},8,["onClick"])])])):Object(r["createCommentVNode"])("",!0)])])})),T=(c("d81d"),c("ac1f"),c("5319"),Object(r["withScopeId"])("data-v-4bd3a786"));Object(r["pushScopeId"])("data-v-4bd3a786");var A={class:"checkout-address"},w={class:"text"},I={key:0,class:"none"},B={key:1},_=Object(r["createVNode"])("span",null,[Object(r["createTextVNode"])("收"),Object(r["createVNode"])("i"),Object(r["createTextVNode"])("货"),Object(r["createVNode"])("i"),Object(r["createTextVNode"])("人：")],-1),E=Object(r["createVNode"])("span",null,"联系方式：",-1),$=Object(r["createVNode"])("span",null,"收货地址：",-1),L={class:"action"},P=Object(r["createTextVNode"])("切换地址"),U=Object(r["createTextVNode"])("添加地址"),X=Object(r["createVNode"])("span",null,[Object(r["createTextVNode"])("收"),Object(r["createVNode"])("i"),Object(r["createTextVNode"])("货"),Object(r["createVNode"])("i"),Object(r["createTextVNode"])("人：")],-1),F=Object(r["createVNode"])("span",null,"联系方式：",-1),M=Object(r["createVNode"])("span",null,"收货地址：",-1),R=Object(r["createTextVNode"])("取消"),J=Object(r["createTextVNode"])("确认");Object(r["popScopeId"])();var q=T((function(e,t,c,a,o,n){var d=Object(r["resolveComponent"])("XtxButton"),l=Object(r["resolveComponent"])("XtxDialog"),i=Object(r["resolveComponent"])("AddressEdit");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])("div",A,[Object(r["createVNode"])("div",w,[a.showAddress?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])("div",I,"您需要先添加收货地址才可提交订单。")),a.showAddress?(Object(r["openBlock"])(),Object(r["createBlock"])("ul",B,[Object(r["createVNode"])("li",null,[_,Object(r["createTextVNode"])(Object(r["toDisplayString"])(a.showAddress.receiver),1)]),Object(r["createVNode"])("li",null,[E,Object(r["createTextVNode"])(Object(r["toDisplayString"])(a.showAddress.contact.replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2")),1)]),Object(r["createVNode"])("li",null,[$,Object(r["createTextVNode"])(Object(r["toDisplayString"])(a.showAddress.fullLocation.replace(/ /g,""))+Object(r["toDisplayString"])(a.showAddress.address),1)])])):Object(r["createCommentVNode"])("",!0),a.showAddress?(Object(r["openBlock"])(),Object(r["createBlock"])("a",{key:2,onClick:t[1]||(t[1]=function(e){return a.openAddressEdit(a.showAddress)}),href:"javascript:;"},"修改地址")):Object(r["createCommentVNode"])("",!0)]),Object(r["createVNode"])("div",L,[Object(r["createVNode"])(d,{onClick:t[2]||(t[2]=function(e){return a.openDialog()}),class:"btn"},{default:T((function(){return[P]})),_:1}),Object(r["createVNode"])(d,{onClick:t[3]||(t[3]=function(e){return a.openAddressEdit({})}),class:"btn"},{default:T((function(){return[U]})),_:1})])]),Object(r["createVNode"])(l,{title:"切换收货地址",visible:a.visibleDialog,"onUpdate:visible":t[5]||(t[5]=function(e){return a.visibleDialog=e})},{footer:T((function(){return[Object(r["createVNode"])(d,{onClick:t[4]||(t[4]=function(e){return a.visibleDialog=!1}),type:"gray",style:{"margin-right":"20px"}},{default:T((function(){return[R]})),_:1}),Object(r["createVNode"])(d,{onClick:a.confirmAddressFn,type:"primary"},{default:T((function(){return[J]})),_:1},8,["onClick"])]})),default:T((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(c.list,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{onClick:function(t){return a.selectedAddress=e},class:[{active:a.selectedAddress&&a.selectedAddress.id===e.id},"text item"],key:e.id},[Object(r["createVNode"])("ul",null,[Object(r["createVNode"])("li",null,[X,Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.receiver),1)]),Object(r["createVNode"])("li",null,[F,Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.contact.replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2")),1)]),Object(r["createVNode"])("li",null,[M,Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.fullLocation.replace(/ /g,"")+e.address),1)])])],10,["onClick"])})),128))]})),_:1},8,["visible"]),Object(r["createVNode"])(i,{onOnSuccess:a.successHandler,ref:"addressEditCom"},null,8,["onOnSuccess"])],64)})),z=(c("7db0"),Object(r["withScopeId"])("data-v-0b9d5efe"));Object(r["pushScopeId"])("data-v-0b9d5efe");var H={class:"address-edit"},G={class:"xtx-form"},K={class:"xtx-form-item"},Q=Object(r["createVNode"])("div",{class:"label"},"收货人：",-1),W={class:"field"},Y={class:"xtx-form-item"},Z=Object(r["createVNode"])("div",{class:"label"},"手机号：",-1),ee={class:"field"},te={class:"xtx-form-item"},ce=Object(r["createVNode"])("div",{class:"label"},"地区：",-1),re={class:"field"},ae={class:"xtx-form-item"},oe=Object(r["createVNode"])("div",{class:"label"},"详细地址：",-1),ne={class:"field"},de={class:"xtx-form-item"},le=Object(r["createVNode"])("div",{class:"label"},"邮政编码：",-1),ie={class:"field"},se={class:"xtx-form-item"},ue=Object(r["createVNode"])("div",{class:"label"},"地址标签：",-1),be={class:"field"},je=Object(r["createTextVNode"])("取消"),Oe=Object(r["createTextVNode"])("确认");Object(r["popScopeId"])();var fe=z((function(e,t,c,a,o,n){var d=Object(r["resolveComponent"])("XtxCity"),l=Object(r["resolveComponent"])("XtxButton"),i=Object(r["resolveComponent"])("XtxDialog");return Object(r["openBlock"])(),Object(r["createBlock"])(i,{title:"".concat(a.formData.id?"修改":"添加","收货地址"),visible:a.visibleDialog,"onUpdate:visible":t[8]||(t[8]=function(e){return a.visibleDialog=e})},{footer:z((function(){return[Object(r["createVNode"])(l,{onClick:t[6]||(t[6]=function(e){return a.visibleDialog=!1}),type:"gray",style:{"margin-right":"20px"}},{default:z((function(){return[je]})),_:1}),Object(r["createVNode"])(l,{onClick:t[7]||(t[7]=function(e){return a.submit()}),type:"primary"},{default:z((function(){return[Oe]})),_:1})]})),default:z((function(){return[Object(r["createVNode"])("div",H,[Object(r["createVNode"])("div",G,[Object(r["createVNode"])("div",K,[Q,Object(r["createVNode"])("div",W,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.formData.receiver=e}),class:"input",placeholder:"请输入收货人"},null,512),[[r["vModelText"],a.formData.receiver]])])]),Object(r["createVNode"])("div",Y,[Z,Object(r["createVNode"])("div",ee,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.formData.contact=e}),class:"input",placeholder:"请输入手机号"},null,512),[[r["vModelText"],a.formData.contact]])])]),Object(r["createVNode"])("div",te,[ce,Object(r["createVNode"])("div",re,[Object(r["createVNode"])(d,{fullLocation:a.formData.fullLocation,onChange:a.changeCity,placeholder:"请选择所在地区"},null,8,["fullLocation","onChange"])])]),Object(r["createVNode"])("div",ae,[oe,Object(r["createVNode"])("div",ne,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.formData.address=e}),class:"input",placeholder:"请输入详细地址"},null,512),[[r["vModelText"],a.formData.address]])])]),Object(r["createVNode"])("div",de,[le,Object(r["createVNode"])("div",ie,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return a.formData.postalCode=e}),class:"input",placeholder:"请输入邮政编码"},null,512),[[r["vModelText"],a.formData.postalCode]])])]),Object(r["createVNode"])("div",se,[ue,Object(r["createVNode"])("div",be,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(e){return a.formData.addressTags=e}),class:"input",placeholder:"请输入地址标签，逗号分隔"},null,512),[[r["vModelText"],a.formData.addressTags]])])])])])]})),_:1},8,["title","visible"])})),ve=c("f8b7"),pe=c("2f59"),Ve={name:"AddressEdit",setup:function(e,t){var c=t.emit,a=Object(r["ref"])(!1),o=function(e){if(a.value=!0,e.id)for(var t in e)n[t]=e[t];else for(var c in n)n[c]="isDefault"===c?1:null},n=Object(r["reactive"])({receiver:null,contact:null,provinceCode:null,cityCode:null,countyCode:null,address:null,postalCode:null,addressTags:null,isDefault:1,fullLocation:null}),d=function(e){n.provinceCode=e.provinceCode,n.cityCode=e.cityCode,n.countyCode=e.countyCode,n.fullLocation=e.fullLocation},l=function(){return n.receiver?n.receiver.length>20?Object(pe["a"])({text:"收货人20个字符内"}):n.contact?/^1[3-9]\d{9}$/.test(n.contact)?n.fullLocation?n.address?n.address.length>50?Object(pe["a"])({text:"详细地址50个字符内"}):n.postalCode&&!/^\d{6}$/.test(n.postalCode)?Object(pe["a"])({text:"邮政编码格式不对"}):n.addressTags&&n.addressTags.length>20?Object(pe["a"])({text:"地址标签20个字符内"}):void(n.id?Object(ve["f"])(n).then((function(e){Object(pe["a"])({type:"success",text:"修改收货地址成功"}),a.value=!1,c("on-success",n)})):Object(ve["a"])(n).then((function(e){n.id=e.result.id,Object(pe["a"])({type:"success",text:"添加收货地址成功"}),a.value=!1,c("on-success",n)}))):Object(pe["a"])({text:"请输入详细地址"}):Object(pe["a"])({text:"请选择收货地区"}):Object(pe["a"])({text:"手机号格式不对"}):Object(pe["a"])({text:"请输入手机号"}):Object(pe["a"])({text:"请输入收货人"})};return{visibleDialog:a,open:o,formData:n,changeCity:d,submit:l}}};c("b309");Ve.render=fe,Ve.__scopeId="data-v-0b9d5efe";var Ne=Ve,me={name:"CheckoutAddress",components:{AddressEdit:Ne},props:{list:{type:Array,default:function(){return[]}}},emits:["change"],setup:function(e,t){var c=t.emit,a=Object(r["ref"])(null),o=e.list.find((function(e){return 0===e.isDefault}));o?a.value=o:e.list.length&&(a.value=e.list[0]),c("change",a.value&&a.value.id);var n=Object(r["ref"])(!1),d=Object(r["ref"])(null),l=function(){var e;a.value=d.value,c("change",null===(e=d.value)||void 0===e?void 0:e.id),n.value=!1},i=function(){d.value=null,n.value=!0},s=Object(r["ref"])(null),u=function(e){s.value.open(e)},b=function(t){var c=e.list.find((function(e){return e.id===t.id}));if(c)for(var r in c)c[r]=t[r];else{var a=JSON.stringify(t);e.list.unshift(JSON.parse(a))}};return{showAddress:a,visibleDialog:n,selectedAddress:d,confirmAddressFn:l,openDialog:i,openAddressEdit:u,addressEditCom:s,successHandler:b}}};c("827c");me.render=q,me.__scopeId="data-v-4bd3a786";var he=me,ge=c("6c02"),xe=c("5502"),ye={name:"XtxPayCheckoutPage",components:{CheckoutAddress:he},setup:function(){var e=Object(r["ref"])(null),t=Object(ge["c"])(),c=Object(xe["b"])();t.query.orderId?Object(ve["j"])(t.query.orderId).then((function(t){e.value=t.result,o.goods=t.result.goods.map((function(e){var t=e.skuId,c=e.count;return{skuId:t,count:c}}))})):Object(ve["d"])().then((function(t){e.value=t.result,o.goods=t.result.goods.map((function(e){var t=e.skuId,c=e.count;return{skuId:t,count:c}}))}));var a=function(e){o.addressId=e},o=Object(r["reactive"])({deliveryTimeType:1,payType:1,payChannel:1,buyerMessage:"",goods:[],addressId:null}),n=Object(ge["d"])(),d=function(){if(!o.addressId)return Object(pe["a"])({text:"亲，请选择收货地址"});Object(ve["k"])(o).then((function(e){c.dispatch("cart/findCart"),Object(pe["a"])({type:"success",text:"提交订单成功"}),n.push("/member/pay?orderId=".concat(e.result.id))}))};return{order:e,changeAddress:a,reqParams:o,submitOrderFn:d}}};c("18e5");ye.render=S,ye.__scopeId="data-v-2c45ae0c";t["default"]=ye},"18e5":function(e,t,c){"use strict";c("e7cc")},5319:function(e,t,c){"use strict";var r=c("d784"),a=c("825a"),o=c("50c4"),n=c("a691"),d=c("1d80"),l=c("8aa5"),i=c("0cb2"),s=c("14c3"),u=Math.max,b=Math.min,j=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,c,r){var O=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,f=r.REPLACE_KEEPS_$0,v=O?"$":"$0";return[function(c,r){var a=d(this),o=void 0==c?void 0:c[e];return void 0!==o?o.call(c,a,r):t.call(String(a),c,r)},function(e,r){if(!O&&f||"string"===typeof r&&-1===r.indexOf(v)){var d=c(t,e,this,r);if(d.done)return d.value}var p=a(e),V=String(this),N="function"===typeof r;N||(r=String(r));var m=p.global;if(m){var h=p.unicode;p.lastIndex=0}var g=[];while(1){var x=s(p,V);if(null===x)break;if(g.push(x),!m)break;var y=String(x[0]);""===y&&(p.lastIndex=l(V,o(p.lastIndex),h))}for(var k="",C=0,D=0;D<g.length;D++){x=g[D];for(var S=String(x[0]),T=u(b(n(x.index),V.length),0),A=[],w=1;w<x.length;w++)A.push(j(x[w]));var I=x.groups;if(N){var B=[S].concat(A,T,V);void 0!==I&&B.push(I);var _=String(r.apply(void 0,B))}else _=i(S,V,T,A,I,r);T>=C&&(k+=V.slice(C,T)+_,C=T+S.length)}return k+V.slice(C)}]}))},"6aea":function(e,t,c){},"827c":function(e,t,c){"use strict";c("6aea")},ab5d:function(e,t,c){},b309:function(e,t,c){"use strict";c("ab5d")},e7cc:function(e,t,c){},f8b7:function(e,t,c){"use strict";c.d(t,"d",(function(){return a})),c.d(t,"j",(function(){return o})),c.d(t,"a",(function(){return n})),c.d(t,"f",(function(){return d})),c.d(t,"k",(function(){return l})),c.d(t,"g",(function(){return i})),c.d(t,"h",(function(){return s})),c.d(t,"b",(function(){return u})),c.d(t,"e",(function(){return b})),c.d(t,"c",(function(){return j})),c.d(t,"i",(function(){return O}));var r=c("b775"),a=function(){return Object(r["b"])("/member/order/pre","get")},o=function(e){return Object(r["b"])("/member/order/repurchase/"+e,"get")},n=function(e){return Object(r["b"])("/member/address","post",e)},d=function(e){return Object(r["b"])("/member/address/".concat(e.id),"put",e)},l=function(e){return Object(r["b"])("/member/order","post",e)},i=function(e){return Object(r["b"])("/member/order/"+e,"get")},s=function(e){var t=e.page,c=void 0===t?1:t,a=e.pageSize,o=void 0===a?10:a,n=e.orderState,d=void 0===n?0:n;return Object(r["b"])("/member/order","get",{page:c,pageSize:o,orderState:d})},u=function(e){var t=e.orderId,c=e.cancelReason;return Object(r["b"])("/member/order/".concat(t,"/cancel"),"put",{cancelReason:c})},b=function(e){return Object(r["b"])("/member/order","delete",{ids:[e]})},j=function(e){return Object(r["b"])("/member/order/".concat(e,"/receipt"),"put")},O=function(e){return Object(r["b"])("/member/order/".concat(e,"/logistics"),"get")}}}]);
//# sourceMappingURL=chunk-7719dd65.68b763fe.js.map