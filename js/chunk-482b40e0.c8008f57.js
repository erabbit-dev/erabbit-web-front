(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-482b40e0"],{"1b50":function(e,t,c){},"4e43":function(e,t,c){"use strict";c("c416")},"72b4":function(e,t,c){e.exports=c.p+"img/qrcode.5372a064.jpg"},"9ed6":function(e,t,c){"use strict";c.r(t);var o=c("7a23"),a=c("72b4"),n=c.n(a);const l=e=>(Object(o["pushScopeId"])("data-v-78257f91"),e=e(),Object(o["popScopeId"])(),e),r={class:"login-section"},s={class:"wrapper"},i={key:1,class:"qrcode-box"},d=l(()=>Object(o["createElementVNode"])("img",{src:n.a,alt:""},null,-1)),m=l(()=>Object(o["createElementVNode"])("p",null,[Object(o["createTextVNode"])("打开 "),Object(o["createElementVNode"])("a",{href:"javascript:;"},"小兔鲜App"),Object(o["createTextVNode"])(" 扫码登录")],-1)),b=[d,m];function j(e,t,c,a,n,l){const d=Object(o["resolveComponent"])("LoginHeader"),m=Object(o["resolveComponent"])("LoginForm"),j=Object(o["resolveComponent"])("LoginFooter");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(d,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("欢迎登录")]),_:1}),Object(o["createElementVNode"])("section",r,[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("nav",null,[Object(o["createElementVNode"])("a",{onClick:t[0]||(t[0]=e=>a.activeName="account"),class:Object(o["normalizeClass"])({active:"account"===a.activeName}),href:"javascript:;"},"账户登录",2),Object(o["createElementVNode"])("a",{onClick:t[1]||(t[1]=e=>a.activeName="qrcode"),class:Object(o["normalizeClass"])({active:"qrcode"===a.activeName}),href:"javascript:;"},"扫码登录",2)]),"account"===a.activeName?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:0},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("表单")]),_:1})):Object(o["createCommentVNode"])("",!0),"qrcode"===a.activeName?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",i,b)):Object(o["createCommentVNode"])("",!0)])]),Object(o["createVNode"])(j)],64)}var O=c("cc8e"),u=c("136e");const p=e=>(Object(o["pushScopeId"])("data-v-7453d80e"),e=e(),Object(o["popScopeId"])(),e),V={class:"account-box"},N={class:"toggle"},v=p(()=>Object(o["createElementVNode"])("i",{class:"iconfont icon-user"},null,-1)),f=p(()=>Object(o["createElementVNode"])("i",{class:"iconfont icon-msg"},null,-1)),g={class:"form-item"},E={class:"input"},k=p(()=>Object(o["createElementVNode"])("i",{class:"iconfont icon-user"},null,-1)),h={key:0,class:"error"},C=p(()=>Object(o["createElementVNode"])("i",{class:"iconfont icon-warning"},null,-1)),w={class:"form-item"},y={class:"input"},x=p(()=>Object(o["createElementVNode"])("i",{class:"iconfont icon-lock"},null,-1)),B={key:0,class:"error"},q=p(()=>Object(o["createElementVNode"])("i",{class:"iconfont icon-warning"},null,-1)),F={class:"form-item"},L={class:"input"},U=p(()=>Object(o["createElementVNode"])("i",{class:"iconfont icon-user"},null,-1)),_={key:0,class:"error"},T=p(()=>Object(o["createElementVNode"])("i",{class:"iconfont icon-warning"},null,-1)),A={class:"form-item"},S={class:"input"},z=p(()=>Object(o["createElementVNode"])("i",{class:"iconfont icon-code"},null,-1)),I={key:0,class:"error"},D=p(()=>Object(o["createElementVNode"])("i",{class:"iconfont icon-warning"},null,-1)),M={class:"form-item"},H={class:"agree"},J=p(()=>Object(o["createElementVNode"])("span",null,"我已同意",-1)),R=p(()=>Object(o["createElementVNode"])("a",{href:"javascript:;"},"《隐私条款》",-1)),$=p(()=>Object(o["createElementVNode"])("span",null,"和",-1)),P=p(()=>Object(o["createElementVNode"])("a",{href:"javascript:;"},"《服务条款》",-1)),X={key:0,class:"error"},G=p(()=>Object(o["createElementVNode"])("i",{class:"iconfont icon-warning"},null,-1)),K={class:"action"},Q=["href"],W=p(()=>Object(o["createElementVNode"])("img",{src:"https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png",alt:""},null,-1)),Y=[W],Z=p(()=>Object(o["createElementVNode"])("div",{class:"url"},[Object(o["createElementVNode"])("a",{href:"javascript:;"},"忘记密码"),Object(o["createElementVNode"])("a",{href:"javascript:;"},"免费注册")],-1));function ee(e,t,c,a,n,l){const r=Object(o["resolveComponent"])("Field"),s=Object(o["resolveComponent"])("Form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",V,[Object(o["createElementVNode"])("div",N,[a.isMsgLogin?(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:0,onClick:t[0]||(t[0]=e=>a.isMsgLogin=!1),href:"javascript:;"},[v,Object(o["createTextVNode"])(" 使用账号登录 ")])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{key:1,onClick:t[1]||(t[1]=e=>a.isMsgLogin=!0),href:"javascript:;"},[f,Object(o["createTextVNode"])(" 使用短信登录 ")]))]),Object(o["createVNode"])(s,{ref:"formCom",class:"form","validation-schema":a.schema,autocomplete:"off"},{default:Object(o["withCtx"])(({errors:e})=>[a.isMsgLogin?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createElementVNode"])("div",F,[Object(o["createElementVNode"])("div",L,[U,Object(o["createVNode"])(r,{class:Object(o["normalizeClass"])({error:e.mobile}),modelValue:a.form.mobile,"onUpdate:modelValue":t[4]||(t[4]=e=>a.form.mobile=e),name:"mobile",type:"text",placeholder:"请输入手机号"},null,8,["class","modelValue"])]),e.mobile?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",_,[T,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.mobile),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",A,[Object(o["createElementVNode"])("div",S,[z,Object(o["createVNode"])(r,{class:Object(o["normalizeClass"])({error:e.code}),modelValue:a.form.code,"onUpdate:modelValue":t[5]||(t[5]=e=>a.form.code=e),name:"code",type:"text",placeholder:"请输入验证码"},null,8,["class","modelValue"]),Object(o["createElementVNode"])("span",{onClick:t[6]||(t[6]=e=>a.send()),class:"code"},Object(o["toDisplayString"])(0===a.time?"发送验证码":a.time+"秒后发送"),1)]),e.code?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",I,[D,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.code),1)])):Object(o["createCommentVNode"])("",!0)])],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createElementVNode"])("div",g,[Object(o["createElementVNode"])("div",E,[k,Object(o["createVNode"])(r,{class:Object(o["normalizeClass"])({error:e.account}),modelValue:a.form.account,"onUpdate:modelValue":t[2]||(t[2]=e=>a.form.account=e),name:"account",type:"text",placeholder:"请输入用户名"},null,8,["class","modelValue"])]),e.account?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",h,[C,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.account),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",w,[Object(o["createElementVNode"])("div",y,[x,Object(o["createVNode"])(r,{class:Object(o["normalizeClass"])({error:e.password}),modelValue:a.form.password,"onUpdate:modelValue":t[3]||(t[3]=e=>a.form.password=e),name:"password",type:"password",placeholder:"请输入密码"},null,8,["class","modelValue"])]),e.password?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",B,[q,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.password),1)])):Object(o["createCommentVNode"])("",!0)])],64)),Object(o["createElementVNode"])("div",M,[Object(o["createElementVNode"])("div",H,[Object(o["createVNode"])(r,{as:"XtxCheckbox",name:"isAgree",modelValue:a.form.isAgree,"onUpdate:modelValue":t[7]||(t[7]=e=>a.form.isAgree=e)},null,8,["modelValue"]),J,R,$,P]),e.isAgree?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",X,[G,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.isAgree),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>a.login()),href:"javascript:;",class:"btn"},"登录")]),_:1},8,["validation-schema"]),Object(o["createElementVNode"])("div",K,[Object(o["createElementVNode"])("a",{href:a.qqUrl},Y,8,Q),Z])])}c("14d9");var te=c("7bb1"),ce=c("9f94"),oe=c("2f59"),ae=c("c24f"),ne=c("5502"),le=c("6605"),re=c("7bbe"),se={name:"LoginForm",components:{Form:te["b"],Field:te["a"]},setup(){const e=Object(o["ref"])(!1),t=Object(o["reactive"])({isAgree:!0,account:"xiaotuxian001",password:"123456",mobile:null,code:null}),c={account:ce["a"].account,password:ce["a"].password,mobile:ce["a"].mobile,code:ce["a"].code,isAgree:ce["a"].isAgree},a=Object(o["ref"])(null);Object(o["watch"])(e,()=>{t.isAgree=!0,t.account=null,t.password=null,t.mobile=null,t.code=null,a.value.resetForm()});const n=Object(ne["b"])(),l=Object(le["d"])(),r=Object(le["c"])(),s=async()=>{const c=await a.value.validate();if(c)try{let c=null;if(e.value){const{mobile:e,code:o}=t;c=await Object(ae["c"])({mobile:e,code:o})}else{const{account:e,password:o}=t;c=await Object(ae["b"])({account:e,password:o})}const{id:o,account:a,avatar:s,mobile:i,nickname:d,token:m}=c.result;n.commit("user/setUser",{id:o,account:a,avatar:s,mobile:i,nickname:d,token:m}),n.dispatch("cart/mergeCart").then(()=>{l.push(r.query.redirectUrl||"/"),Object(oe["a"])({type:"success",text:"登录成功"})})}catch(o){o.response.data&&Object(oe["a"])({type:"error",text:o.response.data.message||"登录失败"})}},i=Object(o["ref"])(0),{pause:d,resume:m}=Object(re["v"])(()=>{i.value--,i.value<=0&&d()},1e3,!1);Object(o["onUnmounted"])(()=>{d()});const b=async()=>{const e=c.mobile(t.mobile);!0===e?0===i.value&&Object(ae["d"])(t.mobile).then(()=>{Object(oe["a"])({type:"success",text:"发送成功"}),i.value=60,m()}).catch(e=>{var t;Object(oe["a"])({type:"error",text:(null===(t=e.response.data)||void 0===t?void 0:t.message)||"发送失败"})}):a.value.setFieldError("mobile",e)},j="101941968",O=encodeURIComponent("http://erabbit.itheima.net/#/login/callback"),u=`https://graph.qq.com/oauth2.0/authorize?client_id=${j}&response_type=token&scope=all&redirect_uri=${O}`;return{isMsgLogin:e,form:t,schema:c,formCom:a,login:s,send:b,time:i,qqUrl:u}}},ie=(c("4e43"),c("6b0d")),de=c.n(ie);const me=de()(se,[["render",ee],["__scopeId","data-v-7453d80e"]]);var be=me,je={name:"PageLogin",components:{LoginHeader:O["a"],LoginFooter:u["a"],LoginForm:be},setup(){const e=Object(o["ref"])("account"),t=Object(ne["b"])(),c=Object(le["c"])();return t.commit("user/setRedirectUrl",c.query.redirectUrl||"/"),{activeName:e}}};c("e87b");const Oe=de()(je,[["render",j],["__scopeId","data-v-78257f91"]]);t["default"]=Oe},c416:function(e,t,c){},e87b:function(e,t,c){"use strict";c("1b50")}}]);
//# sourceMappingURL=chunk-482b40e0.c8008f57.js.map