{"version":3,"sources":["webpack:///./src/views/category/sub.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./src/views/category/components/sub-bread.vue","webpack:///./src/views/category/components/sub-bread.vue?36ee","webpack:///./src/views/category/components/sub-filter.vue","webpack:///./src/views/category/components/sub-filter.vue?cc7c","webpack:///./src/views/category/components/sub-sort.vue","webpack:///./src/views/category/components/sub-sort.vue?2727","webpack:///./src/views/category/sub.vue?6147","webpack:///./src/views/category/components/goods-item.vue?424d","webpack:///./node_modules/core-js/modules/es.string.sub.js","webpack:///./src/views/category/components/sub-sort.vue?1692","webpack:///./src/views/category/components/goods-item.vue","webpack:///./src/views/category/components/goods-item.vue?32cc","webpack:///./src/views/category/components/sub-filter.vue?4e15","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./node_modules/core-js/internals/string-html-forced.js","webpack:///./src/views/category/sub.vue?ff62"],"names":["class","filterChange","sortChange","goodsList","goods","key","id","loading","finished","getData","_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","to","category","top","name","mode","sub","setup","route","store","cate","state","list","forEach","children","find","params","render","filterData","filterLoading","brands","item","selectedBrand","title","changeBrand","href","saleProperties","properties","prop","selectedProp","changeProp","width","height","props","emit","newVal","path","value","then","data","result","unshift","immediate","getFilterParams","obj","brandId","attrs","push","groupName","propertyName","length","propId","__scopeId","sortParams","sortField","changeSort","sortMethod","changeCheck","inventory","onlyDiscount","components","SubBread","SubFilter","SubSort","GoodsItem","reqParams","page","pageSize","categoryId","items","filterParams","$","createHTML","forcedStringHTMLMethod","target","proto","forced","this","alt","isLink","picture","desc","price","type","Object","default","Boolean","requireObjectCoercible","quot","module","exports","string","tag","attribute","S","String","p1","replace","fails","METHOD_NAME","test","toLowerCase","split"],"mappings":"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","file":"js/chunk-02cebc66.06222936.js","sourcesContent":["<template>\n  <div class=\"sub-categroy\">\n    <div class=\"container\">\n      <!-- 面包屑 -->\n      <SubBread />\n      <!-- 筛选区 -->\n      <SubFilter @filter-change=\"filterChange\" />\n      <!-- 商品面板（排序+列表） -->\n      <div class=\"goods-list\">\n        <SubSort @sort-change=\"sortChange\" />\n        <ul>\n          <li v-for=\"goods in goodsList\" :key=\"goods.id\" >\n            <GoodsItem :goods=\"goods\" />\n          </li>\n        </ul>\n        <!-- 无限加载组件 -->\n        <XtxInfiniteLoading :loading=\"loading\" :finished=\"finished\" @infinite=\"getData\" />\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport SubBread from './components/sub-bread'\nimport SubFilter from './components/sub-filter'\nimport SubSort from './components/sub-sort'\nimport GoodsItem from './components/goods-item'\nimport { ref, watch } from 'vue'\nimport { findSubCategoryGoods } from '@/api/category'\nimport { useRoute } from 'vue-router'\nexport default {\n  name: 'SubCategory',\n  components: { SubBread, SubFilter, SubSort, GoodsItem },\n  setup () {\n    const route = useRoute()\n    // 加载中\n    const loading = ref(false)\n    // 是否加载完毕\n    const finished = ref(false)\n    // 商品列表数据\n    const goodsList = ref([])\n    // 请求参数\n    let reqParams = {\n      page: 1,\n      pageSize: 20\n    }\n    const getData = () => {\n      loading.value = true\n      // 设置二级分类的ID\n      reqParams.categoryId = route.params.id\n      findSubCategoryGoods(reqParams).then(({ result }) => {\n        // 获取数据成功\n        if (result.items.length) {\n          // 有数据就追加数据\n          goodsList.value.push(...result.items)\n          // 把page改成下一页页码\n          reqParams.page++\n        } else {\n          // 没有数据，代表加载完成\n          finished.value = true\n        }\n        loading.value = false\n      })\n    }\n    // 在更改了二级分类的时候需要重新加载数据\n    watch(() => route.params.id, (newVal) => {\n      if (newVal && `/category/sub/${newVal}` === route.path) {\n        finished.value = false\n        goodsList.value = [] // 导致列表空的，加载更多组件顶上来，进入可视区，区加载数据\n        reqParams = {\n          page: 1,\n          pageSize: 20\n        }\n      }\n    })\n    // 1. 更改排序组件的筛选数据，重新请求\n    const sortChange = (sortParams) => {\n      finished.value = false\n      // 合并请求参数，保留之前参数\n      reqParams = { ...reqParams, ...sortParams }\n      reqParams.page = 1\n      goodsList.value = []\n      getData()\n    }\n    // 2. 更改筛选组件的筛选数据，重新请求\n    const filterChange = (filterParams) => {\n      finished.value = false\n      // 合并请求参数，保留之前参数\n      reqParams = { ...reqParams, ...filterParams }\n      reqParams.page = 1\n      goodsList.value = []\n      getData()\n    }\n\n    return { loading, finished, getData, goodsList, sortChange, filterChange }\n  }\n}\n</script>\n<style scoped lang=\"less\">\n.goods-list {\n  background: #fff;\n  padding: 0 25px;\n  margin-top: 25px;\n  ul {\n    display: flex;\n    flex-wrap: wrap;\n    padding: 0 5px;\n    li {\n      margin-right: 20px;\n      margin-bottom: 20px;\n      &:nth-child(5n) {\n        margin-right: 0;\n      }\n    }\n  }\n}\n</style>\n","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","<template>\n  <XtxBread>\n    <XtxBreadItem to=\"/\">首页</XtxBreadItem>\n    <XtxBreadItem :key=\"category.top.id\" v-if=\"category.top\" :to=\"`/category/${category.top.id}`\">{{category.top.name}}</XtxBreadItem>\n    <Transition name=\"fade-right\" mode=\"out-in\">\n      <XtxBreadItem :key=\"category.sub.id\" v-if=\"category.sub\">{{category.sub.name}}</XtxBreadItem>\n    </Transition>\n  </XtxBread>\n</template>\n<script>\nimport { useStore } from 'vuex'\nimport { useRoute } from 'vue-router'\nimport { computed } from 'vue'\nexport default {\n  name: 'SubBread',\n  setup () {\n    // 通过计算属性从vuex获取顶级和二级类目信息\n    // 数据对象：{top:{id,name},sub:{id:name}}\n    const route = useRoute()\n    const store = useStore()\n    const category = computed(() => {\n      const cate = {}\n      // 完成获取数据逻辑\n      store.state.category.list.forEach(top => {\n        if (top.children) {\n          const sub = top.children.find(sub => sub.id === route.params.id)\n          if (sub) {\n            cate.top = { id: top.id, name: top.name }\n            cate.sub = { id: sub.id, name: sub.name }\n          }\n        }\n      })\n      return cate\n    })\n\n    return { category }\n  }\n}\n</script>\n<style scoped lang=\"less\"></style>\n","import { render } from \"./sub-bread.vue?vue&type=template&id=3cfc1344\"\nimport script from \"./sub-bread.vue?vue&type=script&lang=js\"\nexport * from \"./sub-bread.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"sub-filter\" v-if=\"filterData && !filterLoading\">\n    <div class=\"item\">\n      <div class=\"head\">品牌：</div>\n      <div class=\"body\">\n        <a class=\"ellipsis\" :title=\"item.name\" @click=\"changeBrand(item.id)\" :class=\"{active:item.id===filterData.selectedBrand}\" href=\"javascript:;\" v-for=\"item in filterData.brands\" :key=\"item.id\">{{item.name}}</a>\n      </div>\n    </div>\n    <div class=\"item\" v-for=\"item in filterData.saleProperties\" :key=\"item.id\">\n      <div class=\"head\">{{item.name}}：</div>\n      <div class=\"body\">\n        <a class=\"ellipsis\" :title=\"prop.name\" @click=\"changeProp(item,prop.id)\" :class=\"{active:prop.id===item.selectedProp}\" href=\"javascript:;\" v-for=\"prop in item.properties\" :key=\"prop.id\">{{prop.name}}</a>\n      </div>\n    </div>\n  </div>\n  <div v-else class=\"sub-filter\">\n    <XtxSkeleton class=\"item\" width=\"800px\" height=\"40px\"  />\n    <XtxSkeleton class=\"item\" width=\"800px\" height=\"40px\"  />\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\"  />\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\"  />\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\"  />\n  </div>\n</template>\n<script>\nimport { ref, watch } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { findSubCategoryFilter } from '@/api/category'\nexport default {\n  name: 'SubFilter',\n  setup (props, { emit }) {\n    const route = useRoute()\n    // 监听二级类目ID的变化获取筛选数据\n    const filterData = ref(null)\n    const filterLoading = ref(false)\n    watch(() => route.params.id, (newVal) => {\n      // 变化后的ID有值 且 处在二级类名路由下\n      if (newVal && `/category/sub/${newVal}` === route.path) {\n        filterLoading.value = true\n        // 发请求获取数据\n        findSubCategoryFilter(route.params.id).then(data => {\n          // 每一组可选的筛选条件缺失 全部 条件，处理下数据加上全部\n          // 给每一组数据加上一个选中的ID\n          // 1. 品牌\n          data.result.selectedBrand = null\n          data.result.brands.unshift({ id: null, name: '全部' })\n          // 2. 属性\n          data.result.saleProperties.forEach(item => {\n            item.selectedProp = null\n            item.properties.unshift({ id: null, name: '全部' })\n          })\n          // 设置修改的数据\n          filterData.value = data.result\n          filterLoading.value = false\n        })\n      }\n    }, { immediate: true })\n\n    // 获取筛选参数的函数\n    const getFilterParams = () => {\n      const obj = { brandId: null, attrs: [] }\n      // 品牌\n      obj.brandId = filterData.value.selectedBrand\n      // 销售属性\n      filterData.value.saleProperties.forEach(item => {\n        if (item.selectedProp) {\n          const prop = item.properties.find(prop => prop.id === item.selectedProp)\n          obj.attrs.push({ groupName: item.name, propertyName: prop.name })\n        }\n      })\n      // 参考数据：{brandId:'',attrs:[{groupName:'',propertyName:''},...]}\n      if (obj.attrs.length === 0) obj.attrs = null\n      return obj\n    }\n\n    // 1. 记录当前选择的品牌\n    const changeBrand = (brandId) => {\n      if (filterData.value.selectedBrand === brandId) return\n      filterData.value.selectedBrand = brandId\n      emit('filter-change', getFilterParams())\n    }\n    // 2. 记录呢选择的销售属性\n    const changeProp = (item, propId) => {\n      if (item.selectedProp === propId) return\n      item.selectedProp = propId\n      emit('filter-change', getFilterParams())\n    }\n\n    return { filterData, filterLoading, changeBrand, changeProp }\n  }\n}\n</script>\n<style scoped lang='less'>\n  // 筛选区\n  .sub-filter {\n    background: #fff;\n    padding: 25px;\n    .item {\n      display: flex;\n      .head {\n        width: 80px;\n        color: #999;\n        line-height: 40px;\n      }\n      .body {\n        flex: 1;\n        a {\n          margin-right: 36px;\n          transition: all .3s;\n          display: inline-block;\n          max-width: 112px;\n          line-height: 40px;\n          &.active,\n          &:hover {\n            color: @xtxColor;\n          }\n        }\n      }\n    }\n    .xtx-skeleton {\n      padding: 10px 0;\n    }\n  }\n</style>\n","import { render } from \"./sub-filter.vue?vue&type=template&id=1e9897c0&scoped=true\"\nimport script from \"./sub-filter.vue?vue&type=script&lang=js\"\nexport * from \"./sub-filter.vue?vue&type=script&lang=js\"\n\nimport \"./sub-filter.vue?vue&type=style&index=0&id=1e9897c0&scoped=true&lang=less\"\nscript.render = render\nscript.__scopeId = \"data-v-1e9897c0\"\n\nexport default script","<template>\n  <div class='sub-sort'>\n    <div class=\"sort\">\n      <a :class=\"{active:sortParams.sortField===null}\" @click=\"changeSort(null)\" href=\"javascript:;\">默认排序</a>\n      <a :class=\"{active:sortParams.sortField==='publishTime'}\" @click=\"changeSort('publishTime')\" href=\"javascript:;\">最新商品</a>\n      <a :class=\"{active:sortParams.sortField==='orderNum'}\" @click=\"changeSort('orderNum')\" href=\"javascript:;\">最高人气</a>\n      <a :class=\"{active:sortParams.sortField==='evaluateNum'}\" @click=\"changeSort('evaluateNum')\" href=\"javascript:;\">评论最多</a>\n      <a @click=\"changeSort('price')\" href=\"javascript:;\">\n        价格排序\n        <i class=\"arrow up\" :class=\"{active:sortParams.sortField==='price'&&sortParams.sortMethod==='asc'}\" />\n        <i class=\"arrow down\" :class=\"{active:sortParams.sortField==='price'&&sortParams.sortMethod==='desc'}\" />\n      </a>\n    </div>\n    <div class=\"check\">\n      <XtxCheckbox @change=\"changeCheck\" v-model=\"sortParams.inventory\">仅显示有货商品</XtxCheckbox>\n      <XtxCheckbox @change=\"changeCheck\" v-model=\"sortParams.onlyDiscount\">仅显示特惠商品</XtxCheckbox>\n    </div>\n  </div>\n</template>\n<script>\nimport { reactive } from 'vue'\nexport default {\n  name: 'SubSort',\n  setup (props, { emit }) {\n    // 实现交互（实现交换的数据和后台保持一致）\n    // 1. 明确交互数据\n    const sortParams = reactive({\n      inventory: false,\n      onlyDiscount: false,\n      sortField: null, // publishTime,orderNum,price,evaluateNum\n      sortMethod: null // asc为正序，desc为倒序，默认为desc\n    })\n    // 2. 提供模板使用\n    // 3. 需要绑定按钮的点击事件修改排序字段和排序方式\n    const changeSort = (sortField) => {\n      if (sortField === 'price') {\n        sortParams.sortField = sortField\n        // 处理排序\n        if (sortParams.sortMethod === null) {\n          sortParams.sortMethod = 'desc'\n        } else {\n          sortParams.sortMethod = sortParams.sortMethod === 'desc' ? 'asc' : 'desc'\n        }\n      } else {\n        // 如果已经选项阻止运行\n        if (sortParams.sortField === sortField) return\n        sortParams.sortField = sortField\n        sortParams.sortMethod = null\n      }\n      // 触发 sort-change 事件\n      emit('sort-change', sortParams)\n    }\n    const changeCheck = () => {\n      // 触发 sort-change 事件\n      emit('sort-change', sortParams)\n    }\n    return { sortParams, changeSort, changeCheck }\n  }\n}\n</script>\n<style scoped lang='less'>\n.sub-sort {\n  height: 80px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  .sort {\n    display: flex;\n    a {\n      height: 30px;\n      line-height: 28px;\n      border: 1px solid #e4e4e4;\n      padding: 0 20px;\n      margin-right: 20px;\n      color: #999;\n      border-radius: 2px;\n      position: relative;\n      transition: all .3s;\n      &.active {\n        background: @xtxColor;\n        border-color: @xtxColor;\n        color: #fff;\n      }\n      .arrow {\n        position: absolute;\n        border: 5px solid transparent;\n        right: 8px;\n        &.up {\n          top: 3px;\n          border-bottom-color: #bbb;\n            &.active {\n            border-bottom-color: @xtxColor;\n          }\n        }\n        &.down {\n          top: 15px;\n          border-top-color: #bbb;\n          &.active {\n            border-top-color: @xtxColor;\n          }\n        }\n      }\n    }\n  }\n  .check {\n    .xtx-checkbox {\n      margin-left: 20px;\n      color: #999;\n    }\n  }\n}\n</style>\n","import { render } from \"./sub-sort.vue?vue&type=template&id=37c4a6d2&scoped=true\"\nimport script from \"./sub-sort.vue?vue&type=script&lang=js\"\nexport * from \"./sub-sort.vue?vue&type=script&lang=js\"\n\nimport \"./sub-sort.vue?vue&type=style&index=0&id=37c4a6d2&scoped=true&lang=less\"\nscript.render = render\nscript.__scopeId = \"data-v-37c4a6d2\"\n\nexport default script","import { render } from \"./sub.vue?vue&type=template&id=5dd098f9&scoped=true\"\nimport script from \"./sub.vue?vue&type=script&lang=js\"\nexport * from \"./sub.vue?vue&type=script&lang=js\"\n\nimport \"./sub.vue?vue&type=style&index=0&id=5dd098f9&scoped=true&lang=less\"\nscript.render = render\nscript.__scopeId = \"data-v-5dd098f9\"\n\nexport default script","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./goods-item.vue?vue&type=style&index=0&id=3828c3be&scoped=true&lang=less\"","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.sub` method\n// https://tc39.es/ecma262/#sec-string.prototype.sub\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('sub') }, {\n  sub: function sub() {\n    return createHTML(this, 'sub', '', '');\n  }\n});\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./sub-sort.vue?vue&type=style&index=0&id=37c4a6d2&scoped=true&lang=less\"","<template>\n  <RouterLink v-if=\"isLink\" :to=\"`/product/${goods.id}`\" class='goods-item'>\n    <img v-lazy=\"goods.picture\" alt=\"\">\n    <p class=\"name ellipsis\">{{goods.name}}</p>\n    <p class=\"desc ellipsis\">{{goods.desc}}</p>\n    <p class=\"price\">&yen;{{goods.price}}</p>\n  </RouterLink>\n  <a v-else href=\"javascript:;\" class='goods-item'>\n    <img v-lazy=\"goods.picture\" alt=\"\">\n    <p class=\"name ellipsis\">{{goods.name}}</p>\n    <p class=\"desc ellipsis\">{{goods.desc}}</p>\n    <p class=\"price\">&yen;{{goods.price}}</p>\n  </a>\n</template>\n\n<script>\nexport default {\n  name: 'GoodsItem',\n  props: {\n    goods: {\n      type: Object,\n      default: () => ({})\n    },\n    isLink: {\n      type: Boolean,\n      default: true\n    }\n  }\n}\n</script>\n\n<style scoped lang='less'>\n.goods-item {\n  display: block;\n  width: 220px;\n  padding: 20px 30px;\n  text-align: center;\n  .hoverShadow();\n  img {\n    width: 160px;\n    height: 160px;\n  }\n  p {\n    padding-top: 10px;\n  }\n  .name {\n    font-size: 16px;\n  }\n  .desc {\n    color: #999;\n    height: 29px;\n  }\n  .price {\n    color: @priceColor;\n    font-size: 20px;\n  }\n}\n</style>\n","import { render } from \"./goods-item.vue?vue&type=template&id=3828c3be&scoped=true\"\nimport script from \"./goods-item.vue?vue&type=script&lang=js\"\nexport * from \"./goods-item.vue?vue&type=script&lang=js\"\n\nimport \"./goods-item.vue?vue&type=style&index=0&id=3828c3be&scoped=true&lang=less\"\nscript.render = render\nscript.__scopeId = \"data-v-3828c3be\"\n\nexport default script","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./sub-filter.vue?vue&type=style&index=0&id=1e9897c0&scoped=true&lang=less\"","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar quot = /\"/g;\n\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\n// https://tc39.es/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = String(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./sub.vue?vue&type=style&index=0&id=5dd098f9&scoped=true&lang=less\""],"sourceRoot":""}